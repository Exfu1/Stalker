(function (e, t, n, o, i) { "use strict"; var a = n.findByStoreName, s = n.findByProps, r = t.patcher.after, c = t.ui.toasts.showToast, l = t.ui.assets.getAssetIDByName, d = o.Forms, u = o.General, p = i.React, f = d.FormSection, m = d.FormRow, g = d.FormDivider, h = a("UserStore"), v = a("GuildStore"), y = a("ChannelStore"), S = a("MessageStore"), b = a("GuildMemberStore"), x = null; function k(e) { var t = v ? Object.values(v.getGuilds() || {}) : [], n = []; for (var o = 0; o < t.length; o++) { var i = b ? b.getMember(t[o].id, e) : null; if (i) n.push(t[o]) } return n } function M(e, t) { var n = []; for (var o = 0; o < t.length; o++) { var i = t[o]; try { var a = y ? Object.values(y.getChannels() || {}) : [], s = a.filter(function (e) { return e.guild_id === i.id && e.type === 0 }); for (var r = 0; r < s.length; r++) { var c = s[r], l = S ? S.getMessages(c.id) : null; if (l && l._array) { var d = l._array.filter(function (t) { return t.author && t.author.id === e }); for (var u = 0; u < Math.min(d.length, 3); u++) { n.push({ id: d[u].id, content: (d[u].content || "").substring(0, 50), channel: c.name, guild: i.name }) } } } } catch (e) { } } return n.slice(0, 10) } var P = { onLoad: function () { try { var e = s("UserProfileSection"); if (e && e.default) { x = r("default", e, function (e, t) { var n = e[0] ? e[0].userId : null; if (!n) return t; var o = h ? h.getCurrentUser() : null; if (o && n === o.id) return t; if (t && t.props && t.props.children && Array.isArray(t.props.children)) { var i = h ? h.getUser(n) : null, a = k(n), s = p.createElement(f, { key: "stalker-pro", title: "ðŸ” Stalker Pro" }, [p.createElement(m, { key: "recent", label: "Recent Messages", subLabel: "Find their messages", trailing: p.createElement(m.Arrow, null), onPress: function () { var e = M(n, a); c("Found " + e.length + " msgs", l("Check")) } }), p.createElement(g, { key: "div" }), p.createElement(m, { key: "hidden", label: "Hidden Channels", subLabel: "Channels they can see", trailing: p.createElement(m.Arrow, null), onPress: function () { c("Checking " + a.length + " servers", l("Check")) } })]); t.props.children.push(s) } return t }) } c("Stalker Pro loaded!", l("Check")) } catch (e) { console.error("Stalker Pro:", e) } }, onUnload: function () { if (x) x() } }; e.default = P; Object.defineProperty(e, "__esModule", { value: !0 }); return e })({}, vendetta, vendetta.metro, vendetta.ui.components, vendetta.metro.common);
