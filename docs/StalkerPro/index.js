(function(X,at,d,e,lt,b,k,W){"use strict";var it=Object.defineProperty,ot=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,Ie=(t,r,n)=>r in t?it(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,Pe=(t,r)=>{for(var n in r||(r={}))st.call(r,n)&&Ie(t,n,r[n]);if(Te)for(var n of Te(r))dt.call(r,n)&&Ie(t,n,r[n]);return t},Ne=(t,r)=>ot(t,ct(r)),me,Ae,$e,we,Be,De,Fe,ze,Oe,xe;const{ScrollView:ut,View:g,Text:s,TouchableOpacity:I,TextInput:Le}=lt.General,ie=((me=e.ReactNative)==null?void 0:me.Modal)||d.findByName("Modal",!1)||((Ae=d.findByProps("Modal"))==null?void 0:Ae.Modal),oe=(($e=e.ReactNative)==null?void 0:$e.BackHandler)||d.findByProps("addEventListener","removeEventListener","exitApp"),L=d.findByStoreName("UserStore"),P=d.findByStoreName("GuildStore"),$=d.findByStoreName("GuildMemberStore"),R=d.findByStoreName("ChannelStore"),U=d.findByStoreName("SelectedGuildStore"),ce=d.findByStoreName("GuildChannelStore"),se=d.findByStoreName("GuildRoleStore"),H=d.findByProps("getChannelPermissions","can"),{getChannel:Ue}=d.findByProps("getChannel")||{},de=((we=d.findByProps("ChannelTypes"))==null?void 0:we.ChannelTypes)||{},w=((Be=e.ReactNative)==null?void 0:Be.Clipboard)||d.findByProps("setString","getString"),ue=d.findByProps("getAPIBaseURL","get")||d.findByProps("API_HOST","get");let _=[];const ft=50;function i(t,r){const n=`[${new Date().toLocaleTimeString()}] [${t}] ${r}`;_.unshift(n),_.length>ft&&_.pop(),at.logger.log(n)}function fe(){return _}function yt(){_=[]}i("INIT","Starting module discovery...");const ye=d.findByName("UserProfileHeader",!1);(De=d.findByProps("UserProfileActions"))==null||De.UserProfileActions;const V=d.findByName("UserProfileSection",!1),ge=d.findByName("ProfileBanner",!1),M=d.findByName("ChannelLongPressActionSheet",!1),gt=d.findByName("ChannelLongPress",!1);d.findByName("ChannelContextMenu",!1),d.findByProps("openContextMenu","closeContextMenu");const ht=d.findByProps("ChannelLongPressActionSheet");d.findByProps("openLazy","hideActionSheet");const B=d.findByProps("openLazy","hideActionSheet"),pt=(Fe=d.findByProps("NavigationContainer"))==null?void 0:Fe.default;d.findByProps("createStackNavigator"),(ze=d.findByProps("useNavigation"))==null||ze.useNavigation;const he=d.findByProps("registerCommand","unregisterCommand"),Me=d.findByProps("ActionSheetRow","ActionSheetHeader")||{},Z=Me.ActionSheetRow||d.findByName("ActionSheetRow",!1),Rt=Me.ActionSheetHeader||d.findByName("ActionSheetTitleHeader",!1);if(i("INIT",`UserProfileHeader: ${!!ye}`),i("INIT",`UserProfileSection: ${!!V}`),i("INIT",`ProfileBanner: ${!!ge}`),i("INIT",`ChannelLongPress: ${!!M}`),i("INIT",`ChannelLongPress2: ${!!gt}`),i("INIT",`ChannelActionSheet: ${!!ht}`),i("INIT",`ActionSheet: ${!!B}`),i("INIT",`ActionSheetRow: ${!!Z}`),i("INIT",`ActionSheetHeader: ${!!Rt}`),i("INIT",`Commands: ${!!he}`),i("INIT",`NavigationNative: ${!!pt}`),M)try{const t=Object.keys(M);i("KEYS",`ChannelLongPress keys: ${t.join(", ")||"none"}`),typeof M=="function"&&i("KEYS","ChannelLongPress is a function")}catch(t){i("ERROR",`Keys read failed: ${t}`)}if(V)try{const t=Object.keys(V);i("KEYS",`UserProfileSection keys: ${t.join(", ")||"none"}`),typeof V=="function"&&i("KEYS","UserProfileSection is a function")}catch(t){i("ERROR",`Keys read failed: ${t}`)}if(B)try{const t=Object.keys(B);i("KEYS",`ActionSheet keys: ${t.join(", ")||"none"}`)}catch(t){i("ERROR",`Keys read failed: ${t}`)}const pe=d.findByProps("pushLazy","popLazy")||d.findByProps("push","pop")||d.findByProps("navigate"),z=d.findByProps("transitionTo","back"),bt=d.findByProps("open","openSection")||d.findByName("SettingsRouter",!1);if(i("INIT",`Navigation: ${!!pe}`),i("INIT",`NavigationRouter: ${!!z}`),i("INIT",`SettingsRouter: ${!!bt}`),pe)try{const t=Object.keys(pe);i("KEYS",`Navigation keys: ${t.join(", ")||"none"}`)}catch(t){i("ERROR",`Navigation keys failed: ${t}`)}if(z)try{const t=Object.keys(z);i("KEYS",`NavigationRouter keys: ${t.join(", ")||"none"}`)}catch(t){i("ERROR",`NavigationRouter keys failed: ${t}`)}const je=((xe=(Oe=e.constants)==null?void 0:Oe.Permissions)==null?void 0:xe.VIEW_CHANNEL)||1024,kt={1:"Create Invite",2:"Kick Members",4:"Ban Members",8:"Administrator",16:"Manage Channels",32:"Manage Server",64:"Add Reactions",128:"View Audit Log",256:"Priority Speaker",512:"Stream",1024:"View Channel",2048:"Send Messages",4096:"Send TTS",8192:"Manage Messages",16384:"Embed Links",32768:"Attach Files",65536:"Read History",131072:"Mention Everyone",262144:"Use External Emoji",524288:"View Insights",1048576:"Connect",2097152:"Speak",4194304:"Mute Members",8388608:"Deafen Members",16777216:"Move Members",33554432:"Use VAD",67108864:"Change Nickname",134217728:"Manage Nicknames",268435456:"Manage Roles",536870912:"Manage Webhooks",1073741824:"Manage Emojis"};let Re=!0,K=!1,be="",ee=null,D=[],te=!1,O={type:null,id:null};const We=[de.DM,de.GROUP_DM,de.GUILD_CATEGORY];function ke(t,r){if(!(!e.FluxDispatcher||r.length===0))try{e.FluxDispatcher.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[t],userIds:r})}catch{}}function vt(t){var r,n;if(!t||(typeof t=="string"&&(t=Ue?.(t)||((r=R?.getChannel)==null?void 0:r.call(R,t))),!t||We.includes(t.type)))return!1;t.realCheck=!0;const c=!((n=H?.can)!=null&&n.call(H,je,t));return delete t.realCheck,c}function He(t){const r=Number(t),n=[];for(const[c,o]of Object.entries(kt))r&Number(c)&&n.push(o);return n}function St(t,r){var n,c,o;try{const l=(n=P?.getGuild)==null?void 0:n.call(P,r);if((c=l?.roles)!=null&&c[t])return{name:l.roles[t].name,color:l.roles[t].color||0,found:!0}}catch{}try{if(se){const l=(o=se.getRole)==null?void 0:o.call(se,r,t);if(l)return{name:l.name,color:l.color||0,found:!0}}}catch{}return{name:`Role ID: ${t}`,color:5793266,found:!1}}function Et(t,r){var n,c;const o=(n=L?.getUser)==null?void 0:n.call(L,t),l=(c=$?.getMember)==null?void 0:c.call($,r,t);return o?{name:l?.nick||o.globalName||o.username,isFetched:!0}:{name:`User ID: ${t}`,isFetched:!1}}function Y(t,r){const n=[],c=[];try{const o=t.permissionOverwrites||{};for(const[l,f]of Object.entries(o)){if(!f)continue;const p=Number(f.allow||0),E=Number(f.deny||0),C=f.type===0||f.type==="role",v=C?"role":"user";let h="",N=0,j=!1,F=!0;if(C)if(l===r)h="@everyone",N=10070709;else{const T=St(l,r);h=T.name,N=T.color,j=!T.found}else{c.push(l);const T=Et(l,r);h=T.name,F=T.isFetched,j=!F}n.push({id:l,name:h,type:v,color:N,allowed:He(p),denied:He(E),isUnknown:j,isFetched:F})}n.sort(function(l,f){return l.name==="@everyone"?-1:f.name==="@everyone"?1:l.type!==f.type?l.type==="role"?-1:1:l.name.localeCompare(f.name)})}catch{}return{overwrites:n,userIds:c}}function Ve(t){switch(t){case 0:return"\u{1F4AC}";case 2:return"\u{1F50A}";case 4:return"\u{1F4C1}";case 5:return"\u{1F4E2}";case 13:return"\u{1F3AD}";case 15:return"\u{1F4CB}";default:return"\u{1F4DD}"}}function Ct(t){var r,n;const c=new Map;try{const o=(r=R?.getMutableGuildChannelsForGuild)==null?void 0:r.call(R,t);if(o)for(const l of Array.isArray(o)?o:Object.values(o))l!=null&&l.id&&c.set(l.id,l)}catch{}try{const o=(n=R?.getMutableGuildChannels)==null?void 0:n.call(R);if(o)for(const l of Object.values(o))l?.guild_id===t&&l!=null&&l.id&&c.set(l.id,l)}catch{}try{if(ce!=null&&ce.getChannels){const o=ce.getChannels(t);if(o){const l=function(f){if(Array.isArray(f))for(const p of f){const E=p?.channel||p;E!=null&&E.id&&c.set(E.id,E)}};if(Array.isArray(o))l(o);else for(const f of Object.keys(o))Array.isArray(o[f])&&l(o[f])}}}catch{}return Array.from(c.values())}function Ge(t){var r,n;const c=[];te=!0;try{const o=Ct(t);for(const l of o)!(l!=null&&l.id)||l.type===4||l.type===1||l.type===3||l.type===11||l.type===12||We.includes(l.type)||vt(l)&&c.push({id:l.id,name:l.name||"unknown",type:l.type||0,parentName:l.parent_id&&((n=(r=R?.getChannel)==null?void 0:r.call(R,l.parent_id))==null?void 0:n.name)||"",permissions:Y(l,t),guildId:t})}catch(o){i("ERROR",`getHiddenChannels: ${o}`)}finally{te=!1}return c.sort(function(o,l){return o.name.localeCompare(l.name)})}function Tt(t,r,n){var c;const o=(c=$?.getMember)==null?void 0:c.call($,n,t);if(!o)return!1;const l=o.roles||[];for(const f of r.permissions.overwrites)if(f.type==="user"&&f.id===t&&f.allowed.includes("View Channel")||f.type==="role"&&l.includes(f.id)&&f.allowed.includes("View Channel"))return!0;return!1}function It(t,r){return Ge(r).filter(function(n){return Tt(t,n,r)})}function _e(t){if(!P||!$)return[];try{return Object.values(P.getGuilds()||{}).filter(function(r){return $.getMember(r.id,t)})}catch{return[]}}async function Ke(t,r){var n,c,o;if(!(ue!=null&&ue.get))return[];try{const l=await ue.get({url:`/guilds/${t}/messages/search`,query:{author_id:r,include_nsfw:!0,sort_by:"timestamp",sort_order:"desc"}}),f=((c=(n=P?.getGuild)==null?void 0:n.call(P,t))==null?void 0:c.name)||"Unknown Server";return(((o=l?.body)==null?void 0:o.messages)||[]).map(function(p){var E,C;return{id:p[0].id,content:p[0].content||"[No text]",channelId:p[0].channel_id,channelName:((C=(E=R?.getChannel)==null?void 0:E.call(R,p[0].channel_id))==null?void 0:C.name)||"unknown",guildId:t,guildName:f,timestamp:p[0].timestamp}})}catch{return[]}}function G(t){return w!=null&&w.setString?(w.setString(t),be=t,!0):!1}function Pt(t,r){G(t)&&k.showToast(`\u{1F4CB} ${r==="role"?"Role":"User"} ID copied!`,b.getAssetIDByName("Check"))}async function Nt(t){var r;const n=(r=L?.getCurrentUser)==null?void 0:r.call(L);if(n&&t===n.id)return;const c=_e(t);if(c.length===0){k.showToast("\u274C No mutual servers",b.getAssetIDByName("Small"));return}k.showToast("\u{1F50D} Searching...",b.getAssetIDByName("ic_search"));let o=[];for(let p=0;p<Math.min(c.length,8);p++){try{o.push(...await Ke(c[p].id,t))}catch{}p<c.length-1&&await new Promise(function(E){return setTimeout(E,250)})}if(o.sort(function(p,E){return new Date(E.timestamp).getTime()-new Date(p.timestamp).getTime()}),o.length===0){k.showToast("\u{1F4ED} No messages",b.getAssetIDByName("Small"));return}const l=o[0],f=`https://discord.com/channels/${l.guildId}/${l.channelId}/${l.id}`;k.showToast(`\u2705 Found ${o.length}!`,b.getAssetIDByName("Check")),setTimeout(function(){G(f)&&k.showToast("\u{1F4CB} Copied latest!",b.getAssetIDByName("Check"))},1500)}async function mt(){if(!(K||!Re))try{if(!(w!=null&&w.getString))return;const t=await w.getString();t&&t!==be&&/^\d{17,19}$/.test(t.trim())&&(be=t,k.showToast("\u{1F3AF} ID detected!",b.getAssetIDByName("Check")),setTimeout(function(){return Nt(t.trim())},1e3))}catch{}}function At(t){const r=Date.now()-new Date(t).getTime(),n=Math.floor(r/6e4),c=Math.floor(n/60),o=Math.floor(c/24);return o>0?`${o}d ago`:c>0?`${c}h ago`:`${n}m ago`}function Ye(t){var r;if(i("NAV",`Opening dashboard via NavigationRouter, channel: ${t||"none"}`),t&&(O={type:"channel",id:t}),z!=null&&z.transitionTo){try{z.transitionTo("VendettaCustomPage",{title:"Stalker Pro",render:ne,key:"StalkerPro"}),i("NAV","\u2705 transitionTo VendettaCustomPage called");return}catch(c){i("NAV",`VendettaCustomPage failed: ${c}`)}const n=["VendettaPlugin","PluginSettings","VENDETTA_CUSTOM_PAGE","CustomPage"];for(const c of n)try{z.transitionTo(c,{title:"Stalker Pro",render:ne}),i("NAV",`\u2705 transitionTo ${c} called`);return}catch(o){i("NAV",`${c} failed: ${o}`)}}if(z!=null&&z.transitionTo)try{z.transitionTo("/settings/plugins"),i("NAV","\u2705 transitionTo /settings/plugins called (fallback)"),k.showToast("\u{1F4F1} Tap 'Stalker Pro' in the list",b.getAssetIDByName("Check"));return}catch(n){i("NAV",`Settings navigation failed: ${n}`)}if(t){const n=(r=R?.getChannel)==null?void 0:r.call(R,t);if(n){G(t);const c=Y(n,n.guild_id),o=c.overwrites.filter(function(p){return p.type==="role"}),l=c.overwrites.filter(function(p){return p.type==="user"});let f=`\u{1F50D} #${n.name}
`;f+=`\u{1F4CB} ID copied: ${t}
`,f+=`\u{1F465} Access: ${o.length} roles, ${l.length} users`,k.showToast(f,b.getAssetIDByName("Check")),i("NAV","\u2705 Fallback: Quick info shown")}}else k.showToast("\u{1F4F1} Go to: Settings \u2192 Plugins \u2192 Stalker Pro",b.getAssetIDByName("Check"))}function ne(){var t,r,n;const[c,o]=e.React.useState("hidden"),[l,f]=e.React.useState([]),[p,E]=e.React.useState(!1),[C,v]=e.React.useState(null),[h,N]=e.React.useState(null),[j,F]=e.React.useState("Tap 'Scan' to find hidden channels"),[T,m]=e.React.useState(""),[J,q]=e.React.useState([]),[x,re]=e.React.useState(null),[ve,qe]=e.React.useState(!1),[Qe,Xe]=e.React.useState(""),[Ft,Se]=e.React.useState(!1),[Ee,Ze]=e.React.useState([]),[ae,zt]=e.React.useState(Re),[le,Ce]=e.React.useState(fe());e.React.useState(0),e.React.useEffect(function(){var a,u;if(O.type==="user"&&O.id)m(O.id),o("user"),O={type:null,id:null};else if(O.type==="channel"&&O.id){const y=(a=U?.getGuildId)==null?void 0:a.call(U);if(y){const S=(u=R?.getChannel)==null?void 0:u.call(R,O.id);if(S){const A={id:S.id,name:S.name,type:S.type,parentName:"",permissions:Y(S,y),guildId:y};N(A),o("perms")}}O={type:null,id:null}}},[]),e.React.useEffect(function(){var a,u,y;K=!0;const S=(a=U?.getGuildId)==null?void 0:a.call(U);S&&v((u=P?.getGuild)==null?void 0:u.call(P,S));const A=(y=oe?.addEventListener)==null?void 0:y.call(oe,"hardwareBackPress",function(){return h?(N(null),c==="perms"&&o("hidden"),!0):c!=="hidden"?(o("hidden"),!0):!1});return function(){var rt;K=!1,(rt=A?.remove)==null||rt.call(A)}},[h,c]),e.React.useEffect(function(){if(h&&h.permissions.userIds.length>0){ke(h.guildId,h.permissions.userIds);const a=setTimeout(function(){var u;if(h&&C){const y=(u=R?.getChannel)==null?void 0:u.call(R,h.id);y&&N(Ne(Pe({},h),{permissions:Y(y,C.id)}))}},1500);return function(){return clearTimeout(a)}}},[h?.id]);const Ot=function(){var a,u;E(!0),f([]);try{const y=(a=U?.getGuildId)==null?void 0:a.call(U);if(y){v((u=P?.getGuild)==null?void 0:u.call(P,y));const S=Ge(y);f(S),F(`Scanned \u2192 ${S.length} hidden`),k.showToast(S.length>0?`\u{1F512} ${S.length} hidden!`:"\u2728 No hidden",b.getAssetIDByName("Check"))}else v(null),F("Open a server first")}catch(y){F(`Error: ${y}`)}finally{E(!1)}},xt=function(){h&&C&&(ke(C.id,h.permissions.userIds),setTimeout(function(){var a;const u=(a=R?.getChannel)==null?void 0:a.call(R,h.id);u&&(N(Ne(Pe({},h),{permissions:Y(u,C.id)})),k.showToast("\u{1F504} Refreshed!",b.getAssetIDByName("Check")))},500))},Lt=function(){const a=T.trim();if(!a||a.length<17){k.showToast("Enter valid ID",b.getAssetIDByName("Small"));return}if(!C){k.showToast("Open a server first",b.getAssetIDByName("Small"));return}qe(!0),ke(C.id,[a]),setTimeout(function(){var u,y;const S=(u=L?.getUser)==null?void 0:u.call(L,a),A=(y=$?.getMember)==null?void 0:y.call($,C.id,a);re({user:S,member:A,id:a}),q(It(a,C.id)),qe(!1)},500)},Ut=async function(){const a=Qe.trim();if(!a||a.length<17){k.showToast("Enter valid ID",b.getAssetIDByName("Small"));return}Se(!0),Ze([]);const u=_e(a);if(u.length===0){k.showToast("\u274C No mutual servers",b.getAssetIDByName("Small")),Se(!1);return}k.showToast("\u{1F50D} Searching...",b.getAssetIDByName("ic_search"));let y=[];for(let S=0;S<Math.min(u.length,8);S++){try{y.push(...await Ke(u[S].id,a))}catch{}S<u.length-1&&await new Promise(function(A){return setTimeout(A,250)})}y.sort(function(S,A){return new Date(A.timestamp).getTime()-new Date(S.timestamp).getTime()}),Ze(y),Se(!1),k.showToast(y.length>0?`\u2705 ${y.length} messages!`:"\u{1F4ED} No messages",b.getAssetIDByName("Check"))},Mt=function(a){const u=`https://discord.com/channels/${a.guildId}/${a.channelId}/${a.id}`;G(u)&&k.showToast("\u{1F4CB} Link copied!",b.getAssetIDByName("Check"))},et=async function(a){var u;try{const y=await((u=w?.getString)==null?void 0:u.call(w));y&&(a(y.trim()),k.showToast("\u{1F4CB} Pasted!",b.getAssetIDByName("Check")))}catch{}},jt=function(a){Re=a,zt(a),k.showToast(a?"\u2705 Auto-search enabled":"\u274C Auto-search disabled",b.getAssetIDByName("Check"))},tt=function(a){return a?`#${a.toString(16).padStart(6,"0")}`:"#99AAB5"},Q=function({id:a,label:u,icon:y}){return e.React.createElement(I,{style:{flex:1,padding:6,backgroundColor:c===a?"#5865F2":"#2b2d31",borderRadius:6,marginHorizontal:1},onPress:function(){o(a),a!=="perms"&&N(null),a==="debug"&&Ce(fe())}},e.React.createElement(s,{style:{color:"#fff",textAlign:"center",fontSize:9,fontWeight:c===a?"bold":"normal"}},`${y}${u}`))},nt=function({ch:a,onPress:u}){return e.React.createElement(I,{style:{margin:6,padding:10,backgroundColor:"#2b2d31",borderRadius:10,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:u},[e.React.createElement(g,{key:"h",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(s,{key:"i",style:{fontSize:14,marginRight:6}},Ve(a.type)),e.React.createElement(g,{key:"n",style:{flex:1}},[e.React.createElement(s,{key:"nm",style:{color:"#fff",fontSize:13,fontWeight:"bold"}},a.name),a.parentName&&e.React.createElement(s,{key:"p",style:{color:"#949ba4",fontSize:10}},`in ${a.parentName}`)]),e.React.createElement(s,{key:"a",style:{color:"#5865F2",fontSize:10}},"\u2192")])])},Wt=function({ow:a}){return e.React.createElement(I,{style:{margin:4,marginHorizontal:6,padding:8,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:a.type==="role"?tt(a.color):"#43b581"},onPress:function(){return Pt(a.id,a.type)}},[e.React.createElement(g,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:3}},[e.React.createElement(s,{key:"t",style:{fontSize:11,marginRight:4}},a.type==="role"?"\u{1F3F7}\uFE0F":"\u{1F464}"),e.React.createElement(g,{key:"nw",style:{flex:1}},[e.React.createElement(s,{key:"n",style:{color:a.type==="role"?tt(a.color):"#43b581",fontSize:12,fontWeight:"bold"}},a.name),!a.isFetched&&a.type==="user"&&e.React.createElement(s,{key:"hint",style:{color:"#949ba4",fontSize:9}},"Tap refresh")]),e.React.createElement(g,{key:"b",style:{backgroundColor:a.type==="role"?"#5865F2":"#43b581",paddingHorizontal:5,paddingVertical:2,borderRadius:3}},e.React.createElement(s,{style:{color:"#fff",fontSize:8,fontWeight:"bold"}},a.type==="role"?"ROLE":"USER")),e.React.createElement(s,{key:"copy",style:{color:"#949ba4",fontSize:9,marginLeft:4}},"\u{1F4CB}")]),a.allowed.length>0&&e.React.createElement(g,{key:"a",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},a.allowed.map(function(u,y){return e.React.createElement(s,{key:`a${y}`,style:{color:"#43b581",fontSize:9,backgroundColor:"rgba(67,181,129,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u2705${u}`)})),a.denied.length>0&&e.React.createElement(g,{key:"d",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},a.denied.map(function(u,y){return e.React.createElement(s,{key:`d${y}`,style:{color:"#ed4245",fontSize:9,backgroundColor:"rgba(237,66,69,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u274C${u}`)}))])};return e.React.createElement(ut,{style:{flex:1,backgroundColor:"#1e1f22"}},[e.React.createElement(g,{key:"h",style:{padding:10,backgroundColor:"#2b2d31",marginBottom:6}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:16,fontWeight:"bold",textAlign:"center"}},"\u{1F50D} Stalker Pro v7.0-dev"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:10,textAlign:"center"}},C?`\u{1F4CD} ${C.name}`:"Open a server")]),e.React.createElement(g,{key:"tabs",style:{flexDirection:"row",padding:4,marginBottom:4}},[e.React.createElement(Q,{key:"1",id:"hidden",label:"Hidden",icon:"\u{1F512}"}),e.React.createElement(Q,{key:"2",id:"perms",label:"Perms",icon:"\u{1F510}"}),e.React.createElement(Q,{key:"3",id:"user",label:"User",icon:"\u{1F464}"}),e.React.createElement(Q,{key:"4",id:"search",label:"Msgs",icon:"\u{1F4AC}"}),e.React.createElement(Q,{key:"5",id:"debug",label:"Debug",icon:"\u{1F41B}"})]),c==="hidden"&&[e.React.createElement(I,{key:"scan",style:{margin:8,padding:12,backgroundColor:"#5865F2",borderRadius:8,alignItems:"center"},onPress:Ot},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:14}},p?"\u23F3 Scanning...":"\u{1F504} Scan Server")),e.React.createElement(s,{key:"dbg",style:{color:"#949ba4",textAlign:"center",fontSize:10,marginBottom:6}},j),...l.map(function(a,u){return e.React.createElement(nt,{key:`c${u}`,ch:a,onPress:function(){N(a),o("perms")}})}),l.length===0&&!p&&e.React.createElement(g,{key:"empty",style:{padding:30,alignItems:"center"}},[e.React.createElement(s,{key:"e1",style:{fontSize:30}},"\u{1F512}"),e.React.createElement(s,{key:"e2",style:{color:"#b5bac1",fontSize:12,marginTop:6,textAlign:"center"}},"Tap 'Scan Server' to find hidden channels")])],c==="perms"&&[!h&&e.React.createElement(g,{key:"no-sel",style:{padding:30,alignItems:"center"}},[e.React.createElement(s,{key:"t1",style:{fontSize:30}},"\u{1F510}"),e.React.createElement(s,{key:"t2",style:{color:"#fff",fontSize:13,marginTop:6}},"Select a channel")]),h&&[e.React.createElement(g,{key:"ch-hdr",style:{padding:10,backgroundColor:"#2b2d31",margin:6,borderRadius:8}},[e.React.createElement(g,{key:"r",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(s,{key:"i",style:{fontSize:18,marginRight:8}},Ve(h.type)),e.React.createElement(s,{key:"n",style:{color:"#fff",fontSize:14,fontWeight:"bold",flex:1}},h.name)])]),e.React.createElement(g,{key:"btns",style:{flexDirection:"row",margin:6,marginTop:0}},[e.React.createElement(I,{key:"ref",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginRight:2,alignItems:"center"},onPress:xt},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(I,{key:"cpy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:2,alignItems:"center"},onPress:function(){G(h.id)&&k.showToast("\u{1F4CB} Channel ID copied",b.getAssetIDByName("Check"))}},e.React.createElement(s,{style:{color:"#b5bac1",fontSize:9}},"\u{1F4CB} Channel ID"))]),e.React.createElement(s,{key:"hint",style:{color:"#949ba4",fontSize:9,textAlign:"center",marginBottom:4}},"Tap any role/user to copy ID"),...h.permissions.overwrites.map(function(a,u){return e.React.createElement(Wt,{key:`ow-${u}`,ow:a})})]],c==="user"&&[e.React.createElement(g,{key:"input-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F464} User ID Lookup"),e.React.createElement(g,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(Le,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:T,onChangeText:m}),e.React.createElement(I,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return et(m)}},e.React.createElement(s,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(I,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:Lt},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},ve?"\u23F3...":"\u{1F50D} Find Hidden Channels"))]),x&&e.React.createElement(g,{key:"user-info",style:{margin:8,marginTop:0,padding:8,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"name",style:{color:"#fff",fontSize:12,fontWeight:"bold"}},((t=x.member)==null?void 0:t.nick)||((r=x.user)==null?void 0:r.globalName)||((n=x.user)==null?void 0:n.username)||`User ${x.id.slice(-6)}`),e.React.createElement(s,{key:"access",style:{color:"#43b581",fontSize:10,marginTop:2}},`\u2705 Can access ${J.length} hidden channels`)]),...J.map(function(a,u){return e.React.createElement(nt,{key:`uc${u}`,ch:a,onPress:function(){N(a),o("perms")}})}),x&&J.length===0&&e.React.createElement(s,{key:"no",style:{color:"#949ba4",textAlign:"center",fontSize:11,marginTop:10}},"No hidden channel access")],c==="search"&&[e.React.createElement(g,{key:"auto-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(g,{key:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},[e.React.createElement(g,{key:"txt"},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:11,fontWeight:"bold"}},"\u{1F4AC} Auto-Search"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:9}},"Copy User ID \u2192 auto-copies latest message")]),e.React.createElement(I,{key:"toggle",style:{padding:8,backgroundColor:ae?"#43b581":"#ed4245",borderRadius:6},onPress:function(){return jt(!ae)}},e.React.createElement(s,{style:{color:"#fff",fontSize:10,fontWeight:"bold"}},ae?"ON":"OFF"))]),e.React.createElement(s,{key:"note",style:{color:"#949ba4",fontSize:9,marginTop:6}},K?"\u23F8\uFE0F Paused while dashboard is open":ae?"\u2705 Active":"\u274C Disabled")]),e.React.createElement(g,{key:"search-box",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F50D} Manual Search"),e.React.createElement(g,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(Le,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:Qe,onChangeText:Xe}),e.React.createElement(I,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return et(Xe)}},e.React.createElement(s,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(I,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:Ut},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},Ft?"\u23F3 Searching...":"\u{1F50D} Find Messages"))]),Ee.length>0&&e.React.createElement(s,{key:"results-title",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginLeft:8,marginTop:4}},`\u{1F4DD} ${Ee.length} Messages:`),...Ee.slice(0,25).map(function(a,u){return e.React.createElement(I,{key:`msg${u}`,style:{margin:4,marginHorizontal:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:function(){return Mt(a)}},[e.React.createElement(g,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:4}},[e.React.createElement(s,{key:"ch",style:{color:"#5865F2",fontSize:11,flex:1}},`#${a.channelName}`),e.React.createElement(s,{key:"time",style:{color:"#949ba4",fontSize:9}},At(a.timestamp))]),e.React.createElement(s,{key:"content",style:{color:"#dcddde",fontSize:11},numberOfLines:2},a.content),e.React.createElement(s,{key:"server",style:{color:"#72767d",fontSize:9,marginTop:4}},`\u{1F4CD} ${a.guildName}`)])})],c==="debug"&&[e.React.createElement(g,{key:"debug-header",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:14,fontWeight:"bold"}},"\u{1F41B} Debug Logs"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:10,marginTop:4}},`${le.length} log entries`),e.React.createElement(g,{key:"btns",style:{flexDirection:"row",marginTop:8}},[e.React.createElement(I,{key:"refresh",style:{flex:1,padding:8,backgroundColor:"#5865F2",borderRadius:6,marginRight:4,alignItems:"center"},onPress:function(){return Ce(fe())}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(I,{key:"clear",style:{flex:1,padding:8,backgroundColor:"#ed4245",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){yt(),Ce([])}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F5D1}\uFE0F Clear")),e.React.createElement(I,{key:"copy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){G(le.join(`
`))&&k.showToast("\u{1F4CB} Logs copied!",b.getAssetIDByName("Check"))}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F4CB} Copy"))])]),e.React.createElement(g,{key:"module-status",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:12,fontWeight:"bold",marginBottom:6}},"\u{1F4E6} Module Status"),e.React.createElement(s,{key:"m1",style:{color:ye?"#43b581":"#ed4245",fontSize:10}},`UserProfileHeader: ${ye?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m2",style:{color:M?"#43b581":"#ed4245",fontSize:10}},`ChannelLongPress: ${M?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m3",style:{color:B?"#43b581":"#ed4245",fontSize:10}},`ActionSheet: ${B?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m4",style:{color:he?"#43b581":"#ed4245",fontSize:10}},`Commands: ${he?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m5",style:{color:"#949ba4",fontSize:10,marginTop:4}},`Patches active: ${D.length}`)]),...le.map(function(a,u){return e.React.createElement(s,{key:`log${u}`,style:{color:a.includes("ERROR")?"#ed4245":a.includes("SUCCESS")?"#43b581":"#b5bac1",fontSize:9,paddingHorizontal:8,paddingVertical:2,fontFamily:"monospace"}},a)}),le.length===0&&e.React.createElement(s,{key:"no-logs",style:{color:"#949ba4",textAlign:"center",marginTop:20,fontSize:11}},"No logs yet")]])}function Je(){const[t,r]=e.React.useState(!1);return e.React.useEffect(function(){return i("POPUP","Popup dashboard registered"),function(){}},[]),ie?t?e.React.createElement(ie,{visible:!0,animationType:"slide",presentationStyle:"fullScreen",onRequestClose:function(){return r(!1)}},e.React.createElement(g,{style:{flex:1,backgroundColor:"#1e1f22"}},[e.React.createElement(g,{key:"header",style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:12,backgroundColor:"#2b2d31",borderBottomWidth:1,borderBottomColor:"#1e1f22"}},[e.React.createElement(s,{key:"title",style:{color:"#fff",fontSize:16,fontWeight:"bold"}},"\u{1F50D} Stalker Pro"),e.React.createElement(I,{key:"close",style:{padding:8,backgroundColor:"#ed4245",borderRadius:6},onPress:function(){return r(!1)}},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold"}},"\u2715 Close"))]),e.React.createElement(ne,{key:"content"})])):null:(i("POPUP","Modal not available"),null)}const $t=ne;function wt(t,r){O={type:t,id:r},i("ACTION",`Set context: ${t} = ${r}`),k.showToast("\u{1F50D} Open plugin settings to view!",b.getAssetIDByName("Check"))}const Bt=function(){i("LOAD","=== STALKER PRO v7.0-dev ==="),i("INIT",`Modal available: ${!!ie}`);const t=d.findByName("App",!1)||d.findByName("AppContainer",!1)||d.findByName("Navigator",!1);if(t)try{D.push(W.after("default",t,function(r,n){return n&&e.React.createElement(g,{style:{flex:1}},[n,e.React.createElement(Je,{key:"stalker-popup"})])})),i("PATCH","\u2705 App container patched for popup")}catch(r){i("ERROR",`App container patch failed: ${r}`)}else{i("INIT","App container not found, trying alternative...");const r=d.findByName("Chat",!1)||d.findByName("ChatContainer",!1);if(r)try{D.push(W.after("default",r,function(n,c){return c&&e.React.createElement(g,{style:{flex:1}},[c,e.React.createElement(Je,{key:"stalker-popup"})])})),i("PATCH","\u2705 Chat container patched for popup")}catch(n){i("ERROR",`Chat container patch failed: ${n}`)}}if(H!=null&&H.can)try{D.push(W.after("can",H,function([r,n],c){return n!=null&&n.realCheck?c:te&&r===je?!0:c})),i("PATCH","\u2705 Permissions.can patched")}catch(r){i("ERROR",`Permissions.can patch failed: ${r}`)}if(M)try{D.push(W.after("default",M,function(r,n){var c,o,l,f,p,E,C;try{const v=r[0];if(v){const T=Object.keys(v);i("STRUCT",`Props keys: ${T.join(", ")}`);const m=((c=v?.channel)==null?void 0:c.id)||v?.channelId||v?.id,J=((o=v?.channel)==null?void 0:o.name)||v?.name||"unknown";i("CHANNEL",`LongPress: ${J} (${m})`);for(const q of T.slice(0,5)){const x=v[q],re=typeof x;if(re==="object"&&x!==null){const ve=Object.keys(x).slice(0,3);i("STRUCT",`  props.${q} = {${ve.join(", ")}...}`)}else i("STRUCT",`  props.${q} = ${re}`)}}if(n&&(i("STRUCT",`res type: ${((l=n.type)==null?void 0:l.name)||((f=n.type)==null?void 0:f.displayName)||typeof n.type}`),n.props)){const T=Object.keys(n.props);if(i("STRUCT",`res.props keys: ${T.join(", ")}`),n.props.children){const m=n.props.children;Array.isArray(m)?i("STRUCT",`res.props.children = Array(${m.length})`):m&&typeof m=="object"?i("STRUCT",`res.props.children = ${((p=m.type)==null?void 0:p.name)||((E=m.type)==null?void 0:E.displayName)||"object"}`):i("STRUCT",`res.props.children = ${typeof m}`)}}const h=v?.channelId,N=(C=n?.props)==null?void 0:C.channel,j=N?.name||"this channel";i("INJECT",`Wrapping with button for: ${j} (${h})`),i("INJECT",`ActionSheetRow available: ${!!Z}`);let F;return Z?(F=e.React.createElement(Z,{key:"stalker-action",label:"Stalker Pro Dashboard",subLabel:`Analyze #${j}`,icon:23490234,onPress:function(){var T;i("ACTION",`ActionSheetRow pressed for ${h}`),(T=B?.hideActionSheet)==null||T.call(B),setTimeout(function(){Ye(h)},100)}}),i("INJECT","Using ActionSheetRow (native gesture handling)")):(F=e.React.createElement(I,{key:"stalker-action",style:{flexDirection:"row",alignItems:"center",paddingVertical:14,paddingHorizontal:20,backgroundColor:"#2b2d31",marginHorizontal:12,marginTop:8,marginBottom:12,borderRadius:12,borderWidth:1,borderColor:"#5865F2"},onPress:function(){var T;i("ACTION",`TouchableOpacity pressed for ${h}`),(T=B?.hideActionSheet)==null||T.call(B),setTimeout(function(){Ye(h)},100)}},[e.React.createElement(s,{key:"icon",style:{fontSize:18,marginRight:12}},"\u{1F50D}"),e.React.createElement(g,{key:"txt",style:{flex:1}},[e.React.createElement(s,{key:"t1",style:{color:"#fff",fontSize:15,fontWeight:"bold"}},"Stalker Pro"),e.React.createElement(s,{key:"t2",style:{color:"#b5bac1",fontSize:11}},"Open Dashboard")]),e.React.createElement(s,{key:"arrow",style:{color:"#5865F2",fontSize:14}},"\u2192")]),i("INJECT","Using TouchableOpacity fallback (gesture conflict possible)")),e.React.createElement(g,{key:"stalker-wrapper",style:{flex:1}},[n,F])}catch(v){return i("ERROR",`ChannelLongPress inject failed: ${v}`),n}})),i("PATCH","\u2705 ChannelLongPress patched (v5.4 - wrapper)")}catch(r){i("ERROR",`ChannelLongPress patch failed: ${r}`)}if(ge)try{D.push(W.after("default",ge,function(r,n){var c;try{const o=r[0],l=((c=o?.user)==null?void 0:c.id)||o?.userId;l&&i("PROFILE",`ProfileBanner rendered: ${l}`)}catch(o){i("ERROR",`ProfileBanner read failed: ${o}`)}return n})),i("PATCH","\u2705 ProfileBanner patched (monitoring)")}catch(r){i("ERROR",`ProfileBanner patch failed: ${r}`)}if(V)try{D.push(W.after("default",V,function(r,n){var c;try{const o=r[0],l=((c=o?.user)==null?void 0:c.id)||o?.userId;if(l&&(i("PROFILE",`UserProfileSection rendered: ${l}`),n&&n.props&&n.props.children)){const f=e.React.createElement(I,{key:"stalker-section",style:{backgroundColor:"#2b2d31",margin:12,padding:12,borderRadius:8,flexDirection:"row",alignItems:"center"},onPress:function(){i("ACTION",`Stalker pressed for user: ${l}`),wt("user",l)}},[e.React.createElement(s,{key:"icon",style:{fontSize:16,marginRight:8}},"\u{1F50D}"),e.React.createElement(s,{key:"text",style:{color:"#fff",fontSize:14}},"Stalker Pro")]),p=n.props.children;Array.isArray(p)&&(p.push(f),i("INJECT","\u2705 Added section to profile"))}}catch(o){i("ERROR",`UserProfileSection inject failed: ${o}`)}return n})),i("PATCH","\u2705 UserProfileSection patched (with injection)")}catch(r){i("ERROR",`UserProfileSection patch failed: ${r}`)}w!=null&&w.getString&&(ee=setInterval(mt,2e3),i("LOAD","\u2705 Clipboard monitor started")),i("LOAD",`Total patches: ${D.length}`),k.showToast("\u{1F50D} Stalker Pro v5.1-dev",b.getAssetIDByName("Check"))},Dt=function(){i("UNLOAD","Cleaning up..."),ee&&(clearInterval(ee),ee=null);const t=D.length;for(const r of D)try{r()}catch{}D=[],te=!1,K=!1,i("UNLOAD",`Removed ${t} patches`)};return X.onLoad=Bt,X.onUnload=Dt,X.settings=$t,X})({},vendetta,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.ui.toasts,vendetta.patcher);
