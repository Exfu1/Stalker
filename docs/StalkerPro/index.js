(function(J,Ke,h,e,Ye,k,S,q){"use strict";var Qe=Object.defineProperty,Je=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,be=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,ve=(t,n,i)=>n in t?Qe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,ke=(t,n)=>{for(var i in n||(n={}))Xe.call(n,i)&&ve(t,i,n[i]);if(be)for(var i of be(n))Ze.call(n,i)&&ve(t,i,n[i]);return t},Se=(t,n)=>Je(t,qe(n)),Ee,Ce,me,Te,we,Ie,Fe,Pe;const{ScrollView:et,View:p,Text:s,TouchableOpacity:m,TextInput:$e}=Ye.General,ne=((Ee=e.ReactNative)==null?void 0:Ee.BackHandler)||h.findByProps("addEventListener","removeEventListener","exitApp"),D=h.findByStoreName("UserStore"),w=h.findByStoreName("GuildStore"),$=h.findByStoreName("GuildMemberStore"),R=h.findByStoreName("ChannelStore"),N=h.findByStoreName("SelectedGuildStore"),re=h.findByStoreName("GuildChannelStore"),le=h.findByStoreName("GuildRoleStore"),j=h.findByProps("getChannelPermissions","can"),{getChannel:Ae}=h.findByProps("getChannel")||{},ae=((Ce=h.findByProps("ChannelTypes"))==null?void 0:Ce.ChannelTypes)||{},A=((me=e.ReactNative)==null?void 0:me.Clipboard)||h.findByProps("setString","getString"),ie=h.findByProps("getAPIBaseURL","get")||h.findByProps("API_HOST","get");let G=[];const tt=50;function c(t,n){const i=`[${new Date().toLocaleTimeString()}] [${t}] ${n}`;G.unshift(i),G.length>tt&&G.pop(),Ke.logger.log(i)}function oe(){return G}function nt(){G=[]}c("INIT","Starting module discovery...");const se=h.findByName("UserProfileHeader",!1);(Te=h.findByProps("UserProfileActions"))==null||Te.UserProfileActions;const H=h.findByName("UserProfileSection",!1),ce=h.findByName("ProfileBanner",!1),L=h.findByName("ChannelLongPressActionSheet",!1),rt=h.findByName("ChannelLongPress",!1);h.findByName("ChannelContextMenu",!1),h.findByProps("openContextMenu","closeContextMenu");const lt=h.findByProps("ChannelLongPressActionSheet");h.findByProps("openLazy","hideActionSheet");const O=h.findByProps("openLazy","hideActionSheet");h.findByName("ActionSheetRow",!1),h.findByName("ActionSheetTitleHeader",!1),h.findByName("ActionSheetCloseButton",!1),(we=h.findByProps("NavigationContainer"))==null||we.default,h.findByProps("createStackNavigator"),(Ie=h.findByProps("useNavigation"))==null||Ie.useNavigation;const de=h.findByProps("registerCommand","unregisterCommand");if(c("INIT",`UserProfileHeader: ${!!se}`),c("INIT",`UserProfileSection: ${!!H}`),c("INIT",`ProfileBanner: ${!!ce}`),c("INIT",`ChannelLongPress: ${!!L}`),c("INIT",`ChannelLongPress2: ${!!rt}`),c("INIT",`ChannelActionSheet: ${!!lt}`),c("INIT",`ActionSheet: ${!!O}`),c("INIT",`Commands: ${!!de}`),L)try{const t=Object.keys(L);c("KEYS",`ChannelLongPress keys: ${t.join(", ")||"none"}`),typeof L=="function"&&c("KEYS","ChannelLongPress is a function")}catch(t){c("ERROR",`Keys read failed: ${t}`)}if(H)try{const t=Object.keys(H);c("KEYS",`UserProfileSection keys: ${t.join(", ")||"none"}`),typeof H=="function"&&c("KEYS","UserProfileSection is a function")}catch(t){c("ERROR",`Keys read failed: ${t}`)}if(O)try{const t=Object.keys(O);c("KEYS",`ActionSheet keys: ${t.join(", ")||"none"}`)}catch(t){c("ERROR",`Keys read failed: ${t}`)}const Be=((Pe=(Fe=e.constants)==null?void 0:Fe.Permissions)==null?void 0:Pe.VIEW_CHANNEL)||1024,at={1:"Create Invite",2:"Kick Members",4:"Ban Members",8:"Administrator",16:"Manage Channels",32:"Manage Server",64:"Add Reactions",128:"View Audit Log",256:"Priority Speaker",512:"Stream",1024:"View Channel",2048:"Send Messages",4096:"Send TTS",8192:"Manage Messages",16384:"Embed Links",32768:"Attach Files",65536:"Read History",131072:"Mention Everyone",262144:"Use External Emoji",524288:"View Insights",1048576:"Connect",2097152:"Speak",4194304:"Mute Members",8388608:"Deafen Members",16777216:"Move Members",33554432:"Use VAD",67108864:"Change Nickname",134217728:"Manage Nicknames",268435456:"Manage Roles",536870912:"Manage Webhooks",1073741824:"Manage Emojis"};let ue=!0,_=!1,fe="",X=null,z=[],Z=!1,B={type:null,id:null};const De=[ae.DM,ae.GROUP_DM,ae.GUILD_CATEGORY];function ye(t,n){if(!(!e.FluxDispatcher||n.length===0))try{e.FluxDispatcher.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[t],userIds:n})}catch{}}function it(t){var n,i;if(!t||(typeof t=="string"&&(t=Ae?.(t)||((n=R?.getChannel)==null?void 0:n.call(R,t))),!t||De.includes(t.type)))return!1;t.realCheck=!0;const o=!((i=j?.can)!=null&&i.call(j,Be,t));return delete t.realCheck,o}function Ne(t){const n=Number(t),i=[];for(const[o,a]of Object.entries(at))n&Number(o)&&i.push(a);return i}function ot(t,n){var i,o,a;try{const l=(i=w?.getGuild)==null?void 0:i.call(w,n);if((o=l?.roles)!=null&&o[t])return{name:l.roles[t].name,color:l.roles[t].color||0,found:!0}}catch{}try{if(le){const l=(a=le.getRole)==null?void 0:a.call(le,n,t);if(l)return{name:l.name,color:l.color||0,found:!0}}}catch{}return{name:`Role ID: ${t}`,color:5793266,found:!1}}function st(t,n){var i,o;const a=(i=D?.getUser)==null?void 0:i.call(D,t),l=(o=$?.getMember)==null?void 0:o.call($,n,t);return a?{name:l?.nick||a.globalName||a.username,isFetched:!0}:{name:`User ID: ${t}`,isFetched:!1}}function V(t,n){const i=[],o=[];try{const a=t.permissionOverwrites||{};for(const[l,f]of Object.entries(a)){if(!f)continue;const b=Number(f.allow||0),v=Number(f.deny||0),d=f.type===0||f.type==="role",F=d?"role":"user";let g="",I=0,U=!1,T=!0;if(d)if(l===n)g="@everyone",I=10070709;else{const C=ot(l,n);g=C.name,I=C.color,U=!C.found}else{o.push(l);const C=st(l,n);g=C.name,T=C.isFetched,U=!T}i.push({id:l,name:g,type:F,color:I,allowed:Ne(b),denied:Ne(v),isUnknown:U,isFetched:T})}i.sort(function(l,f){return l.name==="@everyone"?-1:f.name==="@everyone"?1:l.type!==f.type?l.type==="role"?-1:1:l.name.localeCompare(f.name)})}catch{}return{overwrites:i,userIds:o}}function ze(t){switch(t){case 0:return"\u{1F4AC}";case 2:return"\u{1F50A}";case 4:return"\u{1F4C1}";case 5:return"\u{1F4E2}";case 13:return"\u{1F3AD}";case 15:return"\u{1F4CB}";default:return"\u{1F4DD}"}}function ct(t){var n,i;const o=new Map;try{const a=(n=R?.getMutableGuildChannelsForGuild)==null?void 0:n.call(R,t);if(a)for(const l of Array.isArray(a)?a:Object.values(a))l!=null&&l.id&&o.set(l.id,l)}catch{}try{const a=(i=R?.getMutableGuildChannels)==null?void 0:i.call(R);if(a)for(const l of Object.values(a))l?.guild_id===t&&l!=null&&l.id&&o.set(l.id,l)}catch{}try{if(re!=null&&re.getChannels){const a=re.getChannels(t);if(a){const l=function(f){if(Array.isArray(f))for(const b of f){const v=b?.channel||b;v!=null&&v.id&&o.set(v.id,v)}};if(Array.isArray(a))l(a);else for(const f of Object.keys(a))Array.isArray(a[f])&&l(a[f])}}}catch{}return Array.from(o.values())}function xe(t){var n,i;const o=[];Z=!0;try{const a=ct(t);for(const l of a)!(l!=null&&l.id)||l.type===4||l.type===1||l.type===3||l.type===11||l.type===12||De.includes(l.type)||it(l)&&o.push({id:l.id,name:l.name||"unknown",type:l.type||0,parentName:l.parent_id&&((i=(n=R?.getChannel)==null?void 0:n.call(R,l.parent_id))==null?void 0:i.name)||"",permissions:V(l,t),guildId:t})}catch(a){c("ERROR",`getHiddenChannels: ${a}`)}finally{Z=!1}return o.sort(function(a,l){return a.name.localeCompare(l.name)})}function dt(t,n,i){var o;const a=(o=$?.getMember)==null?void 0:o.call($,i,t);if(!a)return!1;const l=a.roles||[];for(const f of n.permissions.overwrites)if(f.type==="user"&&f.id===t&&f.allowed.includes("View Channel")||f.type==="role"&&l.includes(f.id)&&f.allowed.includes("View Channel"))return!0;return!1}function ut(t,n){return xe(n).filter(function(i){return dt(t,i,n)})}function Le(t){if(!w||!$)return[];try{return Object.values(w.getGuilds()||{}).filter(function(n){return $.getMember(n.id,t)})}catch{return[]}}async function Oe(t,n){var i,o,a;if(!(ie!=null&&ie.get))return[];try{const l=await ie.get({url:`/guilds/${t}/messages/search`,query:{author_id:n,include_nsfw:!0,sort_by:"timestamp",sort_order:"desc"}}),f=((o=(i=w?.getGuild)==null?void 0:i.call(w,t))==null?void 0:o.name)||"Unknown Server";return(((a=l?.body)==null?void 0:a.messages)||[]).map(function(b){var v,d;return{id:b[0].id,content:b[0].content||"[No text]",channelId:b[0].channel_id,channelName:((d=(v=R?.getChannel)==null?void 0:v.call(R,b[0].channel_id))==null?void 0:d.name)||"unknown",guildId:t,guildName:f,timestamp:b[0].timestamp}})}catch{return[]}}function W(t){return A!=null&&A.setString?(A.setString(t),fe=t,!0):!1}function ft(t,n){W(t)&&S.showToast(`\u{1F4CB} ${n==="role"?"Role":"User"} ID copied!`,k.getAssetIDByName("Check"))}async function yt(t){var n;const i=(n=D?.getCurrentUser)==null?void 0:n.call(D);if(i&&t===i.id)return;const o=Le(t);if(o.length===0){S.showToast("\u274C No mutual servers",k.getAssetIDByName("Small"));return}S.showToast("\u{1F50D} Searching...",k.getAssetIDByName("ic_search"));let a=[];for(let b=0;b<Math.min(o.length,8);b++){try{a.push(...await Oe(o[b].id,t))}catch{}b<o.length-1&&await new Promise(function(v){return setTimeout(v,250)})}if(a.sort(function(b,v){return new Date(v.timestamp).getTime()-new Date(b.timestamp).getTime()}),a.length===0){S.showToast("\u{1F4ED} No messages",k.getAssetIDByName("Small"));return}const l=a[0],f=`https://discord.com/channels/${l.guildId}/${l.channelId}/${l.id}`;S.showToast(`\u2705 Found ${a.length}!`,k.getAssetIDByName("Check")),setTimeout(function(){W(f)&&S.showToast("\u{1F4CB} Copied latest!",k.getAssetIDByName("Check"))},1500)}async function gt(){if(!(_||!ue))try{if(!(A!=null&&A.getString))return;const t=await A.getString();t&&t!==fe&&/^\d{17,19}$/.test(t.trim())&&(fe=t,S.showToast("\u{1F3AF} ID detected!",k.getAssetIDByName("Check")),setTimeout(function(){return yt(t.trim())},1e3))}catch{}}function ht(t){const n=Date.now()-new Date(t).getTime(),i=Math.floor(n/6e4),o=Math.floor(i/60),a=Math.floor(o/24);return a>0?`${a}d ago`:o>0?`${o}h ago`:`${i}m ago`}function pt(t){var n;try{const i=(n=R?.getChannel)==null?void 0:n.call(R,t);if(!i){S.showToast("\u274C Channel not found",k.getAssetIDByName("Small"));return}const o=i.guild_id,a=V(i,o),l=i.name||"Unknown";c("SHEET",`Quick view for ${l}: ${a.overwrites.length} overwrites`),W(t);const f=a.overwrites.filter(function(d){return d.type==="role"}),b=a.overwrites.filter(function(d){return d.type==="user"});B={type:"channel",id:t};let v=`\u{1F510} #${l}
`;v+=`\u{1F4CB} Channel ID copied!
`,v+=`\u{1F3F7}\uFE0F ${f.length} roles \u2022 \u{1F464} ${b.length} users`,f.length>0&&(v+=`
Roles: ${f.slice(0,3).map(function(d){return d.name}).join(", ")}`,f.length>3&&(v+="...")),S.showToast(v,k.getAssetIDByName("Check")),a.overwrites.forEach(function(d){const F=[...d.allowed.map(function(g){return`\u2705${g}`}),...d.denied.map(function(g){return`\u274C${g}`})].slice(0,3).join(" ");c("PERMS",`${d.type==="role"?"\u{1F3F7}\uFE0F":"\u{1F464}"} ${d.name}: ${F}`)}),c("SHEET","\u2705 Quick view shown, context set for dashboard")}catch(i){c("ERROR",`showChannelPermissionsSheet failed: ${i}`),S.showToast("\u274C Failed to load permissions",k.getAssetIDByName("Small"))}}function Rt(){var t,n,i;const[o,a]=e.React.useState("hidden"),[l,f]=e.React.useState([]),[b,v]=e.React.useState(!1),[d,F]=e.React.useState(null),[g,I]=e.React.useState(null),[U,T]=e.React.useState("Tap 'Scan' to find hidden channels"),[C,K]=e.React.useState(""),[M,Y]=e.React.useState([]),[x,ge]=e.React.useState(null),[Et,Ue]=e.React.useState(!1),[Me,je]=e.React.useState(""),[Ct,he]=e.React.useState(!1),[pe,He]=e.React.useState([]),[ee,mt]=e.React.useState(ue),[te,Re]=e.React.useState(oe());e.React.useState(0),e.React.useEffect(function(){var r,u;if(B.type==="user"&&B.id)K(B.id),a("user"),B={type:null,id:null};else if(B.type==="channel"&&B.id){const y=(r=N?.getGuildId)==null?void 0:r.call(N);if(y){const E=(u=R?.getChannel)==null?void 0:u.call(R,B.id);if(E){const P={id:E.id,name:E.name,type:E.type,parentName:"",permissions:V(E,y),guildId:y};I(P),a("perms")}}B={type:null,id:null}}},[]),e.React.useEffect(function(){var r,u,y;_=!0;const E=(r=N?.getGuildId)==null?void 0:r.call(N);E&&F((u=w?.getGuild)==null?void 0:u.call(w,E));const P=(y=ne?.addEventListener)==null?void 0:y.call(ne,"hardwareBackPress",function(){return g?(I(null),o==="perms"&&a("hidden"),!0):o!=="hidden"?(a("hidden"),!0):!1});return function(){var Ve;_=!1,(Ve=P?.remove)==null||Ve.call(P)}},[g,o]),e.React.useEffect(function(){if(g&&g.permissions.userIds.length>0){ye(g.guildId,g.permissions.userIds);const r=setTimeout(function(){var u;if(g&&d){const y=(u=R?.getChannel)==null?void 0:u.call(R,g.id);y&&I(Se(ke({},g),{permissions:V(y,d.id)}))}},1500);return function(){return clearTimeout(r)}}},[g?.id]);const Tt=function(){var r,u;v(!0),f([]);try{const y=(r=N?.getGuildId)==null?void 0:r.call(N);if(y){F((u=w?.getGuild)==null?void 0:u.call(w,y));const E=xe(y);f(E),T(`Scanned \u2192 ${E.length} hidden`),S.showToast(E.length>0?`\u{1F512} ${E.length} hidden!`:"\u2728 No hidden",k.getAssetIDByName("Check"))}else F(null),T("Open a server first")}catch(y){T(`Error: ${y}`)}finally{v(!1)}},wt=function(){g&&d&&(ye(d.id,g.permissions.userIds),setTimeout(function(){var r;const u=(r=R?.getChannel)==null?void 0:r.call(R,g.id);u&&(I(Se(ke({},g),{permissions:V(u,d.id)})),S.showToast("\u{1F504} Refreshed!",k.getAssetIDByName("Check")))},500))},It=function(){const r=C.trim();if(!r||r.length<17){S.showToast("Enter valid ID",k.getAssetIDByName("Small"));return}if(!d){S.showToast("Open a server first",k.getAssetIDByName("Small"));return}Ue(!0),ye(d.id,[r]),setTimeout(function(){var u,y;const E=(u=D?.getUser)==null?void 0:u.call(D,r),P=(y=$?.getMember)==null?void 0:y.call($,d.id,r);ge({user:E,member:P,id:r}),Y(ut(r,d.id)),Ue(!1)},500)},Ft=async function(){const r=Me.trim();if(!r||r.length<17){S.showToast("Enter valid ID",k.getAssetIDByName("Small"));return}he(!0),He([]);const u=Le(r);if(u.length===0){S.showToast("\u274C No mutual servers",k.getAssetIDByName("Small")),he(!1);return}S.showToast("\u{1F50D} Searching...",k.getAssetIDByName("ic_search"));let y=[];for(let E=0;E<Math.min(u.length,8);E++){try{y.push(...await Oe(u[E].id,r))}catch{}E<u.length-1&&await new Promise(function(P){return setTimeout(P,250)})}y.sort(function(E,P){return new Date(P.timestamp).getTime()-new Date(E.timestamp).getTime()}),He(y),he(!1),S.showToast(y.length>0?`\u2705 ${y.length} messages!`:"\u{1F4ED} No messages",k.getAssetIDByName("Check"))},Pt=function(r){const u=`https://discord.com/channels/${r.guildId}/${r.channelId}/${r.id}`;W(u)&&S.showToast("\u{1F4CB} Link copied!",k.getAssetIDByName("Check"))},We=async function(r){var u;try{const y=await((u=A?.getString)==null?void 0:u.call(A));y&&(r(y.trim()),S.showToast("\u{1F4CB} Pasted!",k.getAssetIDByName("Check")))}catch{}},$t=function(r){ue=r,mt(r),S.showToast(r?"\u2705 Auto-search enabled":"\u274C Auto-search disabled",k.getAssetIDByName("Check"))},Ge=function(r){return r?`#${r.toString(16).padStart(6,"0")}`:"#99AAB5"},Q=function({id:r,label:u,icon:y}){return e.React.createElement(m,{style:{flex:1,padding:6,backgroundColor:o===r?"#5865F2":"#2b2d31",borderRadius:6,marginHorizontal:1},onPress:function(){a(r),r!=="perms"&&I(null),r==="debug"&&Re(oe())}},e.React.createElement(s,{style:{color:"#fff",textAlign:"center",fontSize:9,fontWeight:o===r?"bold":"normal"}},`${y}${u}`))},_e=function({ch:r,onPress:u}){return e.React.createElement(m,{style:{margin:6,padding:10,backgroundColor:"#2b2d31",borderRadius:10,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:u},[e.React.createElement(p,{key:"h",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(s,{key:"i",style:{fontSize:14,marginRight:6}},ze(r.type)),e.React.createElement(p,{key:"n",style:{flex:1}},[e.React.createElement(s,{key:"nm",style:{color:"#fff",fontSize:13,fontWeight:"bold"}},r.name),r.parentName&&e.React.createElement(s,{key:"p",style:{color:"#949ba4",fontSize:10}},`in ${r.parentName}`)]),e.React.createElement(s,{key:"a",style:{color:"#5865F2",fontSize:10}},"\u2192")])])},At=function({ow:r}){return e.React.createElement(m,{style:{margin:4,marginHorizontal:6,padding:8,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:r.type==="role"?Ge(r.color):"#43b581"},onPress:function(){return ft(r.id,r.type)}},[e.React.createElement(p,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:3}},[e.React.createElement(s,{key:"t",style:{fontSize:11,marginRight:4}},r.type==="role"?"\u{1F3F7}\uFE0F":"\u{1F464}"),e.React.createElement(p,{key:"nw",style:{flex:1}},[e.React.createElement(s,{key:"n",style:{color:r.type==="role"?Ge(r.color):"#43b581",fontSize:12,fontWeight:"bold"}},r.name),!r.isFetched&&r.type==="user"&&e.React.createElement(s,{key:"hint",style:{color:"#949ba4",fontSize:9}},"Tap refresh")]),e.React.createElement(p,{key:"b",style:{backgroundColor:r.type==="role"?"#5865F2":"#43b581",paddingHorizontal:5,paddingVertical:2,borderRadius:3}},e.React.createElement(s,{style:{color:"#fff",fontSize:8,fontWeight:"bold"}},r.type==="role"?"ROLE":"USER")),e.React.createElement(s,{key:"copy",style:{color:"#949ba4",fontSize:9,marginLeft:4}},"\u{1F4CB}")]),r.allowed.length>0&&e.React.createElement(p,{key:"a",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},r.allowed.map(function(u,y){return e.React.createElement(s,{key:`a${y}`,style:{color:"#43b581",fontSize:9,backgroundColor:"rgba(67,181,129,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u2705${u}`)})),r.denied.length>0&&e.React.createElement(p,{key:"d",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},r.denied.map(function(u,y){return e.React.createElement(s,{key:`d${y}`,style:{color:"#ed4245",fontSize:9,backgroundColor:"rgba(237,66,69,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u274C${u}`)}))])};return e.React.createElement(et,{style:{flex:1,backgroundColor:"#1e1f22"}},[e.React.createElement(p,{key:"h",style:{padding:10,backgroundColor:"#2b2d31",marginBottom:6}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:16,fontWeight:"bold",textAlign:"center"}},"\u{1F50D} Stalker Pro v5.6-dev"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:10,textAlign:"center"}},d?`\u{1F4CD} ${d.name}`:"Open a server")]),e.React.createElement(p,{key:"tabs",style:{flexDirection:"row",padding:4,marginBottom:4}},[e.React.createElement(Q,{key:"1",id:"hidden",label:"Hidden",icon:"\u{1F512}"}),e.React.createElement(Q,{key:"2",id:"perms",label:"Perms",icon:"\u{1F510}"}),e.React.createElement(Q,{key:"3",id:"user",label:"User",icon:"\u{1F464}"}),e.React.createElement(Q,{key:"4",id:"search",label:"Msgs",icon:"\u{1F4AC}"}),e.React.createElement(Q,{key:"5",id:"debug",label:"Debug",icon:"\u{1F41B}"})]),o==="hidden"&&[e.React.createElement(m,{key:"scan",style:{margin:8,padding:12,backgroundColor:"#5865F2",borderRadius:8,alignItems:"center"},onPress:Tt},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:14}},b?"\u23F3 Scanning...":"\u{1F504} Scan Server")),e.React.createElement(s,{key:"dbg",style:{color:"#949ba4",textAlign:"center",fontSize:10,marginBottom:6}},U),...l.map(function(r,u){return e.React.createElement(_e,{key:`c${u}`,ch:r,onPress:function(){I(r),a("perms")}})}),l.length===0&&!b&&e.React.createElement(p,{key:"empty",style:{padding:30,alignItems:"center"}},[e.React.createElement(s,{key:"e1",style:{fontSize:30}},"\u{1F512}"),e.React.createElement(s,{key:"e2",style:{color:"#b5bac1",fontSize:12,marginTop:6,textAlign:"center"}},"Tap 'Scan Server' to find hidden channels")])],o==="perms"&&[!g&&e.React.createElement(p,{key:"no-sel",style:{padding:30,alignItems:"center"}},[e.React.createElement(s,{key:"t1",style:{fontSize:30}},"\u{1F510}"),e.React.createElement(s,{key:"t2",style:{color:"#fff",fontSize:13,marginTop:6}},"Select a channel")]),g&&[e.React.createElement(p,{key:"ch-hdr",style:{padding:10,backgroundColor:"#2b2d31",margin:6,borderRadius:8}},[e.React.createElement(p,{key:"r",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(s,{key:"i",style:{fontSize:18,marginRight:8}},ze(g.type)),e.React.createElement(s,{key:"n",style:{color:"#fff",fontSize:14,fontWeight:"bold",flex:1}},g.name)])]),e.React.createElement(p,{key:"btns",style:{flexDirection:"row",margin:6,marginTop:0}},[e.React.createElement(m,{key:"ref",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginRight:2,alignItems:"center"},onPress:wt},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(m,{key:"cpy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:2,alignItems:"center"},onPress:function(){W(g.id)&&S.showToast("\u{1F4CB} Channel ID copied",k.getAssetIDByName("Check"))}},e.React.createElement(s,{style:{color:"#b5bac1",fontSize:9}},"\u{1F4CB} Channel ID"))]),e.React.createElement(s,{key:"hint",style:{color:"#949ba4",fontSize:9,textAlign:"center",marginBottom:4}},"Tap any role/user to copy ID"),...g.permissions.overwrites.map(function(r,u){return e.React.createElement(At,{key:`ow-${u}`,ow:r})})]],o==="user"&&[e.React.createElement(p,{key:"input-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F464} User ID Lookup"),e.React.createElement(p,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement($e,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:C,onChangeText:K}),e.React.createElement(m,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return We(K)}},e.React.createElement(s,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(m,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:It},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},Et?"\u23F3...":"\u{1F50D} Find Hidden Channels"))]),x&&e.React.createElement(p,{key:"user-info",style:{margin:8,marginTop:0,padding:8,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"name",style:{color:"#fff",fontSize:12,fontWeight:"bold"}},((t=x.member)==null?void 0:t.nick)||((n=x.user)==null?void 0:n.globalName)||((i=x.user)==null?void 0:i.username)||`User ${x.id.slice(-6)}`),e.React.createElement(s,{key:"access",style:{color:"#43b581",fontSize:10,marginTop:2}},`\u2705 Can access ${M.length} hidden channels`)]),...M.map(function(r,u){return e.React.createElement(_e,{key:`uc${u}`,ch:r,onPress:function(){I(r),a("perms")}})}),x&&M.length===0&&e.React.createElement(s,{key:"no",style:{color:"#949ba4",textAlign:"center",fontSize:11,marginTop:10}},"No hidden channel access")],o==="search"&&[e.React.createElement(p,{key:"auto-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(p,{key:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},[e.React.createElement(p,{key:"txt"},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:11,fontWeight:"bold"}},"\u{1F4AC} Auto-Search"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:9}},"Copy User ID \u2192 auto-copies latest message")]),e.React.createElement(m,{key:"toggle",style:{padding:8,backgroundColor:ee?"#43b581":"#ed4245",borderRadius:6},onPress:function(){return $t(!ee)}},e.React.createElement(s,{style:{color:"#fff",fontSize:10,fontWeight:"bold"}},ee?"ON":"OFF"))]),e.React.createElement(s,{key:"note",style:{color:"#949ba4",fontSize:9,marginTop:6}},_?"\u23F8\uFE0F Paused while dashboard is open":ee?"\u2705 Active":"\u274C Disabled")]),e.React.createElement(p,{key:"search-box",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F50D} Manual Search"),e.React.createElement(p,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement($e,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:Me,onChangeText:je}),e.React.createElement(m,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return We(je)}},e.React.createElement(s,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(m,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:Ft},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},Ct?"\u23F3 Searching...":"\u{1F50D} Find Messages"))]),pe.length>0&&e.React.createElement(s,{key:"results-title",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginLeft:8,marginTop:4}},`\u{1F4DD} ${pe.length} Messages:`),...pe.slice(0,25).map(function(r,u){return e.React.createElement(m,{key:`msg${u}`,style:{margin:4,marginHorizontal:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:function(){return Pt(r)}},[e.React.createElement(p,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:4}},[e.React.createElement(s,{key:"ch",style:{color:"#5865F2",fontSize:11,flex:1}},`#${r.channelName}`),e.React.createElement(s,{key:"time",style:{color:"#949ba4",fontSize:9}},ht(r.timestamp))]),e.React.createElement(s,{key:"content",style:{color:"#dcddde",fontSize:11},numberOfLines:2},r.content),e.React.createElement(s,{key:"server",style:{color:"#72767d",fontSize:9,marginTop:4}},`\u{1F4CD} ${r.guildName}`)])})],o==="debug"&&[e.React.createElement(p,{key:"debug-header",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:14,fontWeight:"bold"}},"\u{1F41B} Debug Logs"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:10,marginTop:4}},`${te.length} log entries`),e.React.createElement(p,{key:"btns",style:{flexDirection:"row",marginTop:8}},[e.React.createElement(m,{key:"refresh",style:{flex:1,padding:8,backgroundColor:"#5865F2",borderRadius:6,marginRight:4,alignItems:"center"},onPress:function(){return Re(oe())}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(m,{key:"clear",style:{flex:1,padding:8,backgroundColor:"#ed4245",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){nt(),Re([])}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F5D1}\uFE0F Clear")),e.React.createElement(m,{key:"copy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){W(te.join(`
`))&&S.showToast("\u{1F4CB} Logs copied!",k.getAssetIDByName("Check"))}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F4CB} Copy"))])]),e.React.createElement(p,{key:"module-status",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:12,fontWeight:"bold",marginBottom:6}},"\u{1F4E6} Module Status"),e.React.createElement(s,{key:"m1",style:{color:se?"#43b581":"#ed4245",fontSize:10}},`UserProfileHeader: ${se?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m2",style:{color:L?"#43b581":"#ed4245",fontSize:10}},`ChannelLongPress: ${L?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m3",style:{color:O?"#43b581":"#ed4245",fontSize:10}},`ActionSheet: ${O?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m4",style:{color:de?"#43b581":"#ed4245",fontSize:10}},`Commands: ${de?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m5",style:{color:"#949ba4",fontSize:10,marginTop:4}},`Patches active: ${z.length}`)]),...te.map(function(r,u){return e.React.createElement(s,{key:`log${u}`,style:{color:r.includes("ERROR")?"#ed4245":r.includes("SUCCESS")?"#43b581":"#b5bac1",fontSize:9,paddingHorizontal:8,paddingVertical:2,fontFamily:"monospace"}},r)}),te.length===0&&e.React.createElement(s,{key:"no-logs",style:{color:"#949ba4",textAlign:"center",marginTop:20,fontSize:11}},"No logs yet")]])}const bt=Rt;function vt(t,n){B={type:t,id:n},c("ACTION",`Set context: ${t} = ${n}`),S.showToast("\u{1F50D} Open plugin settings to view!",k.getAssetIDByName("Check"))}const kt=function(){if(c("LOAD","=== STALKER PRO v5.6-dev ==="),j!=null&&j.can)try{z.push(q.after("can",j,function([t,n],i){return n!=null&&n.realCheck?i:Z&&t===Be?!0:i})),c("PATCH","\u2705 Permissions.can patched")}catch(t){c("ERROR",`Permissions.can patch failed: ${t}`)}if(L)try{z.push(q.after("default",L,function(t,n){var i,o,a,l,f,b,v;try{const d=t[0];if(d){const T=Object.keys(d);c("STRUCT",`Props keys: ${T.join(", ")}`);const C=((i=d?.channel)==null?void 0:i.id)||d?.channelId||d?.id,K=((o=d?.channel)==null?void 0:o.name)||d?.name||"unknown";c("CHANNEL",`LongPress: ${K} (${C})`);for(const M of T.slice(0,5)){const Y=d[M],x=typeof Y;if(x==="object"&&Y!==null){const ge=Object.keys(Y).slice(0,3);c("STRUCT",`  props.${M} = {${ge.join(", ")}...}`)}else c("STRUCT",`  props.${M} = ${x}`)}}if(n&&(c("STRUCT",`res type: ${((a=n.type)==null?void 0:a.name)||((l=n.type)==null?void 0:l.displayName)||typeof n.type}`),n.props)){const T=Object.keys(n.props);if(c("STRUCT",`res.props keys: ${T.join(", ")}`),n.props.children){const C=n.props.children;Array.isArray(C)?c("STRUCT",`res.props.children = Array(${C.length})`):C&&typeof C=="object"?c("STRUCT",`res.props.children = ${((f=C.type)==null?void 0:f.name)||((b=C.type)==null?void 0:b.displayName)||"object"}`):c("STRUCT",`res.props.children = ${typeof C}`)}}const F=d?.channelId,g=(v=n?.props)==null?void 0:v.channel,I=g?.name||"this channel";c("INJECT",`Wrapping with button for: ${I} (${F})`);const U=e.React.createElement(m,{key:"stalker-action",style:{flexDirection:"row",alignItems:"center",paddingVertical:14,paddingHorizontal:20,backgroundColor:"#2b2d31",marginHorizontal:12,marginTop:8,marginBottom:12,borderRadius:12,borderWidth:1,borderColor:"#5865F2"},onPress:function(){var T;c("ACTION",`Stalker pressed for ${F}`),(T=O?.hideActionSheet)==null||T.call(O),setTimeout(function(){F&&pt(F)},100)}},[e.React.createElement(s,{key:"icon",style:{fontSize:18,marginRight:12}},"\u{1F510}"),e.React.createElement(p,{key:"txt",style:{flex:1}},[e.React.createElement(s,{key:"t1",style:{color:"#fff",fontSize:15,fontWeight:"bold"}},"Stalker Pro"),e.React.createElement(s,{key:"t2",style:{color:"#b5bac1",fontSize:11}},"View permissions")]),e.React.createElement(s,{key:"arrow",style:{color:"#5865F2",fontSize:14}},"\u2192")]);return e.React.createElement(p,{key:"stalker-wrapper",style:{flex:1}},[n,U])}catch(d){return c("ERROR",`ChannelLongPress inject failed: ${d}`),n}})),c("PATCH","\u2705 ChannelLongPress patched (v5.4 - wrapper)")}catch(t){c("ERROR",`ChannelLongPress patch failed: ${t}`)}if(ce)try{z.push(q.after("default",ce,function(t,n){var i;try{const o=t[0],a=((i=o?.user)==null?void 0:i.id)||o?.userId;a&&c("PROFILE",`ProfileBanner rendered: ${a}`)}catch(o){c("ERROR",`ProfileBanner read failed: ${o}`)}return n})),c("PATCH","\u2705 ProfileBanner patched (monitoring)")}catch(t){c("ERROR",`ProfileBanner patch failed: ${t}`)}if(H)try{z.push(q.after("default",H,function(t,n){var i;try{const o=t[0],a=((i=o?.user)==null?void 0:i.id)||o?.userId;if(a&&(c("PROFILE",`UserProfileSection rendered: ${a}`),n&&n.props&&n.props.children)){const l=e.React.createElement(m,{key:"stalker-section",style:{backgroundColor:"#2b2d31",margin:12,padding:12,borderRadius:8,flexDirection:"row",alignItems:"center"},onPress:function(){c("ACTION",`Stalker pressed for user: ${a}`),vt("user",a)}},[e.React.createElement(s,{key:"icon",style:{fontSize:16,marginRight:8}},"\u{1F50D}"),e.React.createElement(s,{key:"text",style:{color:"#fff",fontSize:14}},"Stalker Pro")]),f=n.props.children;Array.isArray(f)&&(f.push(l),c("INJECT","\u2705 Added section to profile"))}}catch(o){c("ERROR",`UserProfileSection inject failed: ${o}`)}return n})),c("PATCH","\u2705 UserProfileSection patched (with injection)")}catch(t){c("ERROR",`UserProfileSection patch failed: ${t}`)}A!=null&&A.getString&&(X=setInterval(gt,2e3),c("LOAD","\u2705 Clipboard monitor started")),c("LOAD",`Total patches: ${z.length}`),S.showToast("\u{1F50D} Stalker Pro v5.1-dev",k.getAssetIDByName("Check"))},St=function(){c("UNLOAD","Cleaning up..."),X&&(clearInterval(X),X=null);const t=z.length;for(const n of z)try{n()}catch{}z=[],Z=!1,_=!1,c("UNLOAD",`Removed ${t} patches`)};return J.onLoad=kt,J.onUnload=St,J.settings=bt,J})({},vendetta,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.ui.toasts,vendetta.patcher);
