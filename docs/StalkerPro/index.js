(function(J,tt,d,e,nt,v,E,j){"use strict";var rt=Object.defineProperty,at=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,Se=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,Ce=(t,n,r)=>n in t?rt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,me=(t,n)=>{for(var r in n||(n={}))it.call(n,r)&&Ce(t,r,n[r]);if(Se)for(var r of Se(n))ot.call(n,r)&&Ce(t,r,n[r]);return t},Ie=(t,n)=>at(t,lt(n)),Te,Ne,Pe,$e,Ae,Be,we,De,Fe,ze;const{ScrollView:ct,View:h,Text:c,TouchableOpacity:m,TextInput:Oe}=nt.General,re=((Te=e.ReactNative)==null?void 0:Te.Modal)||d.findByName("Modal",!1)||((Ne=d.findByProps("Modal"))==null?void 0:Ne.Modal),ae=((Pe=e.ReactNative)==null?void 0:Pe.BackHandler)||d.findByProps("addEventListener","removeEventListener","exitApp"),z=d.findByStoreName("UserStore"),N=d.findByStoreName("GuildStore"),A=d.findByStoreName("GuildMemberStore"),b=d.findByStoreName("ChannelStore"),O=d.findByStoreName("SelectedGuildStore"),le=d.findByStoreName("GuildChannelStore"),ie=d.findByStoreName("GuildRoleStore"),W=d.findByProps("getChannelPermissions","can"),{getChannel:xe}=d.findByProps("getChannel")||{},oe=(($e=d.findByProps("ChannelTypes"))==null?void 0:$e.ChannelTypes)||{},B=((Ae=e.ReactNative)==null?void 0:Ae.Clipboard)||d.findByProps("setString","getString"),ce=d.findByProps("getAPIBaseURL","get")||d.findByProps("API_HOST","get");let V=[];const st=50;function o(t,n){const r=`[${new Date().toLocaleTimeString()}] [${t}] ${n}`;V.unshift(r),V.length>st&&V.pop(),tt.logger.log(r)}function se(){return V}function dt(){V=[]}o("INIT","Starting module discovery...");const de=d.findByName("UserProfileHeader",!1);(Be=d.findByProps("UserProfileActions"))==null||Be.UserProfileActions;const H=d.findByName("UserProfileSection",!1),ue=d.findByName("ProfileBanner",!1),M=d.findByName("ChannelLongPressActionSheet",!1),ut=d.findByName("ChannelLongPress",!1);d.findByName("ChannelContextMenu",!1),d.findByProps("openContextMenu","closeContextMenu");const ft=d.findByProps("ChannelLongPressActionSheet");d.findByProps("openLazy","hideActionSheet");const U=d.findByProps("openLazy","hideActionSheet");d.findByName("ActionSheetRow",!1),d.findByName("ActionSheetTitleHeader",!1),d.findByName("ActionSheetCloseButton",!1);const yt=(we=d.findByProps("NavigationContainer"))==null?void 0:we.default;d.findByProps("createStackNavigator");const gt=(De=d.findByProps("useNavigation"))==null?void 0:De.useNavigation,fe=d.findByProps("registerCommand","unregisterCommand");if(o("INIT",`UserProfileHeader: ${!!de}`),o("INIT",`UserProfileSection: ${!!H}`),o("INIT",`ProfileBanner: ${!!ue}`),o("INIT",`ChannelLongPress: ${!!M}`),o("INIT",`ChannelLongPress2: ${!!ut}`),o("INIT",`ChannelActionSheet: ${!!ft}`),o("INIT",`ActionSheet: ${!!U}`),o("INIT",`Commands: ${!!fe}`),o("INIT",`NavigationNative: ${!!yt}`),o("INIT",`useNavigation: ${!!gt}`),M)try{const t=Object.keys(M);o("KEYS",`ChannelLongPress keys: ${t.join(", ")||"none"}`),typeof M=="function"&&o("KEYS","ChannelLongPress is a function")}catch(t){o("ERROR",`Keys read failed: ${t}`)}if(H)try{const t=Object.keys(H);o("KEYS",`UserProfileSection keys: ${t.join(", ")||"none"}`),typeof H=="function"&&o("KEYS","UserProfileSection is a function")}catch(t){o("ERROR",`Keys read failed: ${t}`)}if(U)try{const t=Object.keys(U);o("KEYS",`ActionSheet keys: ${t.join(", ")||"none"}`)}catch(t){o("ERROR",`Keys read failed: ${t}`)}const ye=d.findByProps("pushLazy","popLazy")||d.findByProps("push","pop")||d.findByProps("navigate"),ge=d.findByProps("transitionTo","back"),pt=d.findByProps("open","openSection")||d.findByName("SettingsRouter",!1);if(o("INIT",`Navigation: ${!!ye}`),o("INIT",`NavigationRouter: ${!!ge}`),o("INIT",`SettingsRouter: ${!!pt}`),ye)try{const t=Object.keys(ye);o("KEYS",`Navigation keys: ${t.join(", ")||"none"}`)}catch(t){o("ERROR",`Navigation keys failed: ${t}`)}if(ge)try{const t=Object.keys(ge);o("KEYS",`NavigationRouter keys: ${t.join(", ")||"none"}`)}catch(t){o("ERROR",`NavigationRouter keys failed: ${t}`)}const Le=((ze=(Fe=e.constants)==null?void 0:Fe.Permissions)==null?void 0:ze.VIEW_CHANNEL)||1024,ht={1:"Create Invite",2:"Kick Members",4:"Ban Members",8:"Administrator",16:"Manage Channels",32:"Manage Server",64:"Add Reactions",128:"View Audit Log",256:"Priority Speaker",512:"Stream",1024:"View Channel",2048:"Send Messages",4096:"Send TTS",8192:"Manage Messages",16384:"Embed Links",32768:"Attach Files",65536:"Read History",131072:"Mention Everyone",262144:"Use External Emoji",524288:"View Insights",1048576:"Connect",2097152:"Speak",4194304:"Mute Members",8388608:"Deafen Members",16777216:"Move Members",33554432:"Use VAD",67108864:"Change Nickname",134217728:"Manage Nicknames",268435456:"Manage Roles",536870912:"Manage Webhooks",1073741824:"Manage Emojis"};let pe=!0,_=!1,he="",X=null,w=[],Z=!1,x={type:null,id:null};const Me=[oe.DM,oe.GROUP_DM,oe.GUILD_CATEGORY];function Re(t,n){if(!(!e.FluxDispatcher||n.length===0))try{e.FluxDispatcher.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[t],userIds:n})}catch{}}function Rt(t){var n,r;if(!t||(typeof t=="string"&&(t=xe?.(t)||((n=b?.getChannel)==null?void 0:n.call(b,t))),!t||Me.includes(t.type)))return!1;t.realCheck=!0;const s=!((r=W?.can)!=null&&r.call(W,Le,t));return delete t.realCheck,s}function Ue(t){const n=Number(t),r=[];for(const[s,i]of Object.entries(ht))n&Number(s)&&r.push(i);return r}function bt(t,n){var r,s,i;try{const l=(r=N?.getGuild)==null?void 0:r.call(N,n);if((s=l?.roles)!=null&&s[t])return{name:l.roles[t].name,color:l.roles[t].color||0,found:!0}}catch{}try{if(ie){const l=(i=ie.getRole)==null?void 0:i.call(ie,n,t);if(l)return{name:l.name,color:l.color||0,found:!0}}}catch{}return{name:`Role ID: ${t}`,color:5793266,found:!1}}function kt(t,n){var r,s;const i=(r=z?.getUser)==null?void 0:r.call(z,t),l=(s=A?.getMember)==null?void 0:s.call(A,n,t);return i?{name:l?.nick||i.globalName||i.username,isFetched:!0}:{name:`User ID: ${t}`,isFetched:!1}}function K(t,n){const r=[],s=[];try{const i=t.permissionOverwrites||{};for(const[l,f]of Object.entries(i)){if(!f)continue;const R=Number(f.allow||0),S=Number(f.deny||0),k=f.type===0||f.type==="role",y=k?"role":"user";let g="",T=0,D=!1,L=!0;if(k)if(l===n)g="@everyone",T=10070709;else{const I=bt(l,n);g=I.name,T=I.color,D=!I.found}else{s.push(l);const I=kt(l,n);g=I.name,L=I.isFetched,D=!L}r.push({id:l,name:g,type:y,color:T,allowed:Ue(R),denied:Ue(S),isUnknown:D,isFetched:L})}r.sort(function(l,f){return l.name==="@everyone"?-1:f.name==="@everyone"?1:l.type!==f.type?l.type==="role"?-1:1:l.name.localeCompare(f.name)})}catch{}return{overwrites:r,userIds:s}}function je(t){switch(t){case 0:return"\u{1F4AC}";case 2:return"\u{1F50A}";case 4:return"\u{1F4C1}";case 5:return"\u{1F4E2}";case 13:return"\u{1F3AD}";case 15:return"\u{1F4CB}";default:return"\u{1F4DD}"}}function vt(t){var n,r;const s=new Map;try{const i=(n=b?.getMutableGuildChannelsForGuild)==null?void 0:n.call(b,t);if(i)for(const l of Array.isArray(i)?i:Object.values(i))l!=null&&l.id&&s.set(l.id,l)}catch{}try{const i=(r=b?.getMutableGuildChannels)==null?void 0:r.call(b);if(i)for(const l of Object.values(i))l?.guild_id===t&&l!=null&&l.id&&s.set(l.id,l)}catch{}try{if(le!=null&&le.getChannels){const i=le.getChannels(t);if(i){const l=function(f){if(Array.isArray(f))for(const R of f){const S=R?.channel||R;S!=null&&S.id&&s.set(S.id,S)}};if(Array.isArray(i))l(i);else for(const f of Object.keys(i))Array.isArray(i[f])&&l(i[f])}}}catch{}return Array.from(s.values())}function We(t){var n,r;const s=[];Z=!0;try{const i=vt(t);for(const l of i)!(l!=null&&l.id)||l.type===4||l.type===1||l.type===3||l.type===11||l.type===12||Me.includes(l.type)||Rt(l)&&s.push({id:l.id,name:l.name||"unknown",type:l.type||0,parentName:l.parent_id&&((r=(n=b?.getChannel)==null?void 0:n.call(b,l.parent_id))==null?void 0:r.name)||"",permissions:K(l,t),guildId:t})}catch(i){o("ERROR",`getHiddenChannels: ${i}`)}finally{Z=!1}return s.sort(function(i,l){return i.name.localeCompare(l.name)})}function Et(t,n,r){var s;const i=(s=A?.getMember)==null?void 0:s.call(A,r,t);if(!i)return!1;const l=i.roles||[];for(const f of n.permissions.overwrites)if(f.type==="user"&&f.id===t&&f.allowed.includes("View Channel")||f.type==="role"&&l.includes(f.id)&&f.allowed.includes("View Channel"))return!0;return!1}function St(t,n){return We(n).filter(function(r){return Et(t,r,n)})}function He(t){if(!N||!A)return[];try{return Object.values(N.getGuilds()||{}).filter(function(n){return A.getMember(n.id,t)})}catch{return[]}}async function Ge(t,n){var r,s,i;if(!(ce!=null&&ce.get))return[];try{const l=await ce.get({url:`/guilds/${t}/messages/search`,query:{author_id:n,include_nsfw:!0,sort_by:"timestamp",sort_order:"desc"}}),f=((s=(r=N?.getGuild)==null?void 0:r.call(N,t))==null?void 0:s.name)||"Unknown Server";return(((i=l?.body)==null?void 0:i.messages)||[]).map(function(R){var S,k;return{id:R[0].id,content:R[0].content||"[No text]",channelId:R[0].channel_id,channelName:((k=(S=b?.getChannel)==null?void 0:S.call(b,R[0].channel_id))==null?void 0:k.name)||"unknown",guildId:t,guildName:f,timestamp:R[0].timestamp}})}catch{return[]}}function G(t){return B!=null&&B.setString?(B.setString(t),he=t,!0):!1}function Ct(t,n){G(t)&&E.showToast(`\u{1F4CB} ${n==="role"?"Role":"User"} ID copied!`,v.getAssetIDByName("Check"))}async function mt(t){var n;const r=(n=z?.getCurrentUser)==null?void 0:n.call(z);if(r&&t===r.id)return;const s=He(t);if(s.length===0){E.showToast("\u274C No mutual servers",v.getAssetIDByName("Small"));return}E.showToast("\u{1F50D} Searching...",v.getAssetIDByName("ic_search"));let i=[];for(let R=0;R<Math.min(s.length,8);R++){try{i.push(...await Ge(s[R].id,t))}catch{}R<s.length-1&&await new Promise(function(S){return setTimeout(S,250)})}if(i.sort(function(R,S){return new Date(S.timestamp).getTime()-new Date(R.timestamp).getTime()}),i.length===0){E.showToast("\u{1F4ED} No messages",v.getAssetIDByName("Small"));return}const l=i[0],f=`https://discord.com/channels/${l.guildId}/${l.channelId}/${l.id}`;E.showToast(`\u2705 Found ${i.length}!`,v.getAssetIDByName("Check")),setTimeout(function(){G(f)&&E.showToast("\u{1F4CB} Copied latest!",v.getAssetIDByName("Check"))},1500)}async function It(){if(!(_||!pe))try{if(!(B!=null&&B.getString))return;const t=await B.getString();t&&t!==he&&/^\d{17,19}$/.test(t.trim())&&(he=t,E.showToast("\u{1F3AF} ID detected!",v.getAssetIDByName("Check")),setTimeout(function(){return mt(t.trim())},1e3))}catch{}}function Tt(t){const n=Date.now()-new Date(t).getTime(),r=Math.floor(n/6e4),s=Math.floor(r/60),i=Math.floor(s/24);return i>0?`${i}d ago`:s>0?`${s}h ago`:`${r}m ago`}function Nt(t){var n;if(o("NAV",`Quick access for channel: ${t||"none"}`),t){const r=(n=b?.getChannel)==null?void 0:n.call(b,t);if(r){const s=r.guild_id,i=K(r,s),l=r.name||"Unknown";G(t);const f=i.overwrites.filter(function(y){return y.type==="role"}),R=i.overwrites.filter(function(y){return y.type==="user"}),S=i.overwrites.some(function(y){return y.name==="@everyone"&&y.denied.some(function(g){return g.includes("VIEW")})});let k=`\u{1F50D} #${l}
`;k+=`\u{1F4CB} ID copied: ${t}
`,k+=S?`\u{1F512} HIDDEN CHANNEL
`:"",k+=`\u{1F465} Access: ${f.length} roles, ${R.length} users
`,f.length>0&&(k+=`Roles: ${f.slice(0,3).map(function(y){return y.name}).join(", ")}`,f.length>3&&(k+=`... +${f.length-3}`)),E.showToast(k,v.getAssetIDByName("Check")),i.overwrites.forEach(function(y){const g=y.allowed.slice(0,3).map(function(D){return`\u2705${D}`}).join(" "),T=y.denied.slice(0,3).map(function(D){return`\u274C${D}`}).join(" ");o("PERMS",`${y.type==="role"?"\u{1F3F7}\uFE0F":"\u{1F464}"} ${y.name}: ${g} ${T}`)}),o("NAV","\u2705 Quick info shown, ID copied, check Debug tab for details")}else E.showToast("\u274C Channel not found",v.getAssetIDByName("Small"))}else E.showToast(`\u{1F4F1} Go to: Settings \u2192 Plugins \u2192 Stalker Pro

Or long-press a channel for quick info!`,v.getAssetIDByName("Check"))}function Ve(){var t,n,r;const[s,i]=e.React.useState("hidden"),[l,f]=e.React.useState([]),[R,S]=e.React.useState(!1),[k,y]=e.React.useState(null),[g,T]=e.React.useState(null),[D,L]=e.React.useState("Tap 'Scan' to find hidden channels"),[I,P]=e.React.useState(""),[Y,q]=e.React.useState([]),[F,ee]=e.React.useState(null),[be,Ke]=e.React.useState(!1),[Ye,qe]=e.React.useState(""),[wt,ke]=e.React.useState(!1),[ve,Qe]=e.React.useState([]),[te,Dt]=e.React.useState(pe),[ne,Ee]=e.React.useState(se());e.React.useState(0),e.React.useEffect(function(){var a,u;if(x.type==="user"&&x.id)P(x.id),i("user"),x={type:null,id:null};else if(x.type==="channel"&&x.id){const p=(a=O?.getGuildId)==null?void 0:a.call(O);if(p){const C=(u=b?.getChannel)==null?void 0:u.call(b,x.id);if(C){const $={id:C.id,name:C.name,type:C.type,parentName:"",permissions:K(C,p),guildId:p};T($),i("perms")}}x={type:null,id:null}}},[]),e.React.useEffect(function(){var a,u,p;_=!0;const C=(a=O?.getGuildId)==null?void 0:a.call(O);C&&y((u=N?.getGuild)==null?void 0:u.call(N,C));const $=(p=ae?.addEventListener)==null?void 0:p.call(ae,"hardwareBackPress",function(){return g?(T(null),s==="perms"&&i("hidden"),!0):s!=="hidden"?(i("hidden"),!0):!1});return function(){var et;_=!1,(et=$?.remove)==null||et.call($)}},[g,s]),e.React.useEffect(function(){if(g&&g.permissions.userIds.length>0){Re(g.guildId,g.permissions.userIds);const a=setTimeout(function(){var u;if(g&&k){const p=(u=b?.getChannel)==null?void 0:u.call(b,g.id);p&&T(Ie(me({},g),{permissions:K(p,k.id)}))}},1500);return function(){return clearTimeout(a)}}},[g?.id]);const Ft=function(){var a,u;S(!0),f([]);try{const p=(a=O?.getGuildId)==null?void 0:a.call(O);if(p){y((u=N?.getGuild)==null?void 0:u.call(N,p));const C=We(p);f(C),L(`Scanned \u2192 ${C.length} hidden`),E.showToast(C.length>0?`\u{1F512} ${C.length} hidden!`:"\u2728 No hidden",v.getAssetIDByName("Check"))}else y(null),L("Open a server first")}catch(p){L(`Error: ${p}`)}finally{S(!1)}},zt=function(){g&&k&&(Re(k.id,g.permissions.userIds),setTimeout(function(){var a;const u=(a=b?.getChannel)==null?void 0:a.call(b,g.id);u&&(T(Ie(me({},g),{permissions:K(u,k.id)})),E.showToast("\u{1F504} Refreshed!",v.getAssetIDByName("Check")))},500))},Ot=function(){const a=I.trim();if(!a||a.length<17){E.showToast("Enter valid ID",v.getAssetIDByName("Small"));return}if(!k){E.showToast("Open a server first",v.getAssetIDByName("Small"));return}Ke(!0),Re(k.id,[a]),setTimeout(function(){var u,p;const C=(u=z?.getUser)==null?void 0:u.call(z,a),$=(p=A?.getMember)==null?void 0:p.call(A,k.id,a);ee({user:C,member:$,id:a}),q(St(a,k.id)),Ke(!1)},500)},xt=async function(){const a=Ye.trim();if(!a||a.length<17){E.showToast("Enter valid ID",v.getAssetIDByName("Small"));return}ke(!0),Qe([]);const u=He(a);if(u.length===0){E.showToast("\u274C No mutual servers",v.getAssetIDByName("Small")),ke(!1);return}E.showToast("\u{1F50D} Searching...",v.getAssetIDByName("ic_search"));let p=[];for(let C=0;C<Math.min(u.length,8);C++){try{p.push(...await Ge(u[C].id,a))}catch{}C<u.length-1&&await new Promise(function($){return setTimeout($,250)})}p.sort(function(C,$){return new Date($.timestamp).getTime()-new Date(C.timestamp).getTime()}),Qe(p),ke(!1),E.showToast(p.length>0?`\u2705 ${p.length} messages!`:"\u{1F4ED} No messages",v.getAssetIDByName("Check"))},Lt=function(a){const u=`https://discord.com/channels/${a.guildId}/${a.channelId}/${a.id}`;G(u)&&E.showToast("\u{1F4CB} Link copied!",v.getAssetIDByName("Check"))},Je=async function(a){var u;try{const p=await((u=B?.getString)==null?void 0:u.call(B));p&&(a(p.trim()),E.showToast("\u{1F4CB} Pasted!",v.getAssetIDByName("Check")))}catch{}},Mt=function(a){pe=a,Dt(a),E.showToast(a?"\u2705 Auto-search enabled":"\u274C Auto-search disabled",v.getAssetIDByName("Check"))},Xe=function(a){return a?`#${a.toString(16).padStart(6,"0")}`:"#99AAB5"},Q=function({id:a,label:u,icon:p}){return e.React.createElement(m,{style:{flex:1,padding:6,backgroundColor:s===a?"#5865F2":"#2b2d31",borderRadius:6,marginHorizontal:1},onPress:function(){i(a),a!=="perms"&&T(null),a==="debug"&&Ee(se())}},e.React.createElement(c,{style:{color:"#fff",textAlign:"center",fontSize:9,fontWeight:s===a?"bold":"normal"}},`${p}${u}`))},Ze=function({ch:a,onPress:u}){return e.React.createElement(m,{style:{margin:6,padding:10,backgroundColor:"#2b2d31",borderRadius:10,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:u},[e.React.createElement(h,{key:"h",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(c,{key:"i",style:{fontSize:14,marginRight:6}},je(a.type)),e.React.createElement(h,{key:"n",style:{flex:1}},[e.React.createElement(c,{key:"nm",style:{color:"#fff",fontSize:13,fontWeight:"bold"}},a.name),a.parentName&&e.React.createElement(c,{key:"p",style:{color:"#949ba4",fontSize:10}},`in ${a.parentName}`)]),e.React.createElement(c,{key:"a",style:{color:"#5865F2",fontSize:10}},"\u2192")])])},Ut=function({ow:a}){return e.React.createElement(m,{style:{margin:4,marginHorizontal:6,padding:8,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:a.type==="role"?Xe(a.color):"#43b581"},onPress:function(){return Ct(a.id,a.type)}},[e.React.createElement(h,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:3}},[e.React.createElement(c,{key:"t",style:{fontSize:11,marginRight:4}},a.type==="role"?"\u{1F3F7}\uFE0F":"\u{1F464}"),e.React.createElement(h,{key:"nw",style:{flex:1}},[e.React.createElement(c,{key:"n",style:{color:a.type==="role"?Xe(a.color):"#43b581",fontSize:12,fontWeight:"bold"}},a.name),!a.isFetched&&a.type==="user"&&e.React.createElement(c,{key:"hint",style:{color:"#949ba4",fontSize:9}},"Tap refresh")]),e.React.createElement(h,{key:"b",style:{backgroundColor:a.type==="role"?"#5865F2":"#43b581",paddingHorizontal:5,paddingVertical:2,borderRadius:3}},e.React.createElement(c,{style:{color:"#fff",fontSize:8,fontWeight:"bold"}},a.type==="role"?"ROLE":"USER")),e.React.createElement(c,{key:"copy",style:{color:"#949ba4",fontSize:9,marginLeft:4}},"\u{1F4CB}")]),a.allowed.length>0&&e.React.createElement(h,{key:"a",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},a.allowed.map(function(u,p){return e.React.createElement(c,{key:`a${p}`,style:{color:"#43b581",fontSize:9,backgroundColor:"rgba(67,181,129,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u2705${u}`)})),a.denied.length>0&&e.React.createElement(h,{key:"d",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},a.denied.map(function(u,p){return e.React.createElement(c,{key:`d${p}`,style:{color:"#ed4245",fontSize:9,backgroundColor:"rgba(237,66,69,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u274C${u}`)}))])};return e.React.createElement(ct,{style:{flex:1,backgroundColor:"#1e1f22"}},[e.React.createElement(h,{key:"h",style:{padding:10,backgroundColor:"#2b2d31",marginBottom:6}},[e.React.createElement(c,{key:"t",style:{color:"#fff",fontSize:16,fontWeight:"bold",textAlign:"center"}},"\u{1F50D} Stalker Pro v6.1-dev"),e.React.createElement(c,{key:"s",style:{color:"#b5bac1",fontSize:10,textAlign:"center"}},k?`\u{1F4CD} ${k.name}`:"Open a server")]),e.React.createElement(h,{key:"tabs",style:{flexDirection:"row",padding:4,marginBottom:4}},[e.React.createElement(Q,{key:"1",id:"hidden",label:"Hidden",icon:"\u{1F512}"}),e.React.createElement(Q,{key:"2",id:"perms",label:"Perms",icon:"\u{1F510}"}),e.React.createElement(Q,{key:"3",id:"user",label:"User",icon:"\u{1F464}"}),e.React.createElement(Q,{key:"4",id:"search",label:"Msgs",icon:"\u{1F4AC}"}),e.React.createElement(Q,{key:"5",id:"debug",label:"Debug",icon:"\u{1F41B}"})]),s==="hidden"&&[e.React.createElement(m,{key:"scan",style:{margin:8,padding:12,backgroundColor:"#5865F2",borderRadius:8,alignItems:"center"},onPress:Ft},e.React.createElement(c,{style:{color:"#fff",fontWeight:"bold",fontSize:14}},R?"\u23F3 Scanning...":"\u{1F504} Scan Server")),e.React.createElement(c,{key:"dbg",style:{color:"#949ba4",textAlign:"center",fontSize:10,marginBottom:6}},D),...l.map(function(a,u){return e.React.createElement(Ze,{key:`c${u}`,ch:a,onPress:function(){T(a),i("perms")}})}),l.length===0&&!R&&e.React.createElement(h,{key:"empty",style:{padding:30,alignItems:"center"}},[e.React.createElement(c,{key:"e1",style:{fontSize:30}},"\u{1F512}"),e.React.createElement(c,{key:"e2",style:{color:"#b5bac1",fontSize:12,marginTop:6,textAlign:"center"}},"Tap 'Scan Server' to find hidden channels")])],s==="perms"&&[!g&&e.React.createElement(h,{key:"no-sel",style:{padding:30,alignItems:"center"}},[e.React.createElement(c,{key:"t1",style:{fontSize:30}},"\u{1F510}"),e.React.createElement(c,{key:"t2",style:{color:"#fff",fontSize:13,marginTop:6}},"Select a channel")]),g&&[e.React.createElement(h,{key:"ch-hdr",style:{padding:10,backgroundColor:"#2b2d31",margin:6,borderRadius:8}},[e.React.createElement(h,{key:"r",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(c,{key:"i",style:{fontSize:18,marginRight:8}},je(g.type)),e.React.createElement(c,{key:"n",style:{color:"#fff",fontSize:14,fontWeight:"bold",flex:1}},g.name)])]),e.React.createElement(h,{key:"btns",style:{flexDirection:"row",margin:6,marginTop:0}},[e.React.createElement(m,{key:"ref",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginRight:2,alignItems:"center"},onPress:zt},e.React.createElement(c,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(m,{key:"cpy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:2,alignItems:"center"},onPress:function(){G(g.id)&&E.showToast("\u{1F4CB} Channel ID copied",v.getAssetIDByName("Check"))}},e.React.createElement(c,{style:{color:"#b5bac1",fontSize:9}},"\u{1F4CB} Channel ID"))]),e.React.createElement(c,{key:"hint",style:{color:"#949ba4",fontSize:9,textAlign:"center",marginBottom:4}},"Tap any role/user to copy ID"),...g.permissions.overwrites.map(function(a,u){return e.React.createElement(Ut,{key:`ow-${u}`,ow:a})})]],s==="user"&&[e.React.createElement(h,{key:"input-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F464} User ID Lookup"),e.React.createElement(h,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(Oe,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:I,onChangeText:P}),e.React.createElement(m,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return Je(P)}},e.React.createElement(c,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(m,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:Ot},e.React.createElement(c,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},be?"\u23F3...":"\u{1F50D} Find Hidden Channels"))]),F&&e.React.createElement(h,{key:"user-info",style:{margin:8,marginTop:0,padding:8,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"name",style:{color:"#fff",fontSize:12,fontWeight:"bold"}},((t=F.member)==null?void 0:t.nick)||((n=F.user)==null?void 0:n.globalName)||((r=F.user)==null?void 0:r.username)||`User ${F.id.slice(-6)}`),e.React.createElement(c,{key:"access",style:{color:"#43b581",fontSize:10,marginTop:2}},`\u2705 Can access ${Y.length} hidden channels`)]),...Y.map(function(a,u){return e.React.createElement(Ze,{key:`uc${u}`,ch:a,onPress:function(){T(a),i("perms")}})}),F&&Y.length===0&&e.React.createElement(c,{key:"no",style:{color:"#949ba4",textAlign:"center",fontSize:11,marginTop:10}},"No hidden channel access")],s==="search"&&[e.React.createElement(h,{key:"auto-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(h,{key:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},[e.React.createElement(h,{key:"txt"},[e.React.createElement(c,{key:"t",style:{color:"#fff",fontSize:11,fontWeight:"bold"}},"\u{1F4AC} Auto-Search"),e.React.createElement(c,{key:"s",style:{color:"#b5bac1",fontSize:9}},"Copy User ID \u2192 auto-copies latest message")]),e.React.createElement(m,{key:"toggle",style:{padding:8,backgroundColor:te?"#43b581":"#ed4245",borderRadius:6},onPress:function(){return Mt(!te)}},e.React.createElement(c,{style:{color:"#fff",fontSize:10,fontWeight:"bold"}},te?"ON":"OFF"))]),e.React.createElement(c,{key:"note",style:{color:"#949ba4",fontSize:9,marginTop:6}},_?"\u23F8\uFE0F Paused while dashboard is open":te?"\u2705 Active":"\u274C Disabled")]),e.React.createElement(h,{key:"search-box",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F50D} Manual Search"),e.React.createElement(h,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(Oe,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:Ye,onChangeText:qe}),e.React.createElement(m,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return Je(qe)}},e.React.createElement(c,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(m,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:xt},e.React.createElement(c,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},wt?"\u23F3 Searching...":"\u{1F50D} Find Messages"))]),ve.length>0&&e.React.createElement(c,{key:"results-title",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginLeft:8,marginTop:4}},`\u{1F4DD} ${ve.length} Messages:`),...ve.slice(0,25).map(function(a,u){return e.React.createElement(m,{key:`msg${u}`,style:{margin:4,marginHorizontal:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:function(){return Lt(a)}},[e.React.createElement(h,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:4}},[e.React.createElement(c,{key:"ch",style:{color:"#5865F2",fontSize:11,flex:1}},`#${a.channelName}`),e.React.createElement(c,{key:"time",style:{color:"#949ba4",fontSize:9}},Tt(a.timestamp))]),e.React.createElement(c,{key:"content",style:{color:"#dcddde",fontSize:11},numberOfLines:2},a.content),e.React.createElement(c,{key:"server",style:{color:"#72767d",fontSize:9,marginTop:4}},`\u{1F4CD} ${a.guildName}`)])})],s==="debug"&&[e.React.createElement(h,{key:"debug-header",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"t",style:{color:"#fff",fontSize:14,fontWeight:"bold"}},"\u{1F41B} Debug Logs"),e.React.createElement(c,{key:"s",style:{color:"#b5bac1",fontSize:10,marginTop:4}},`${ne.length} log entries`),e.React.createElement(h,{key:"btns",style:{flexDirection:"row",marginTop:8}},[e.React.createElement(m,{key:"refresh",style:{flex:1,padding:8,backgroundColor:"#5865F2",borderRadius:6,marginRight:4,alignItems:"center"},onPress:function(){return Ee(se())}},e.React.createElement(c,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(m,{key:"clear",style:{flex:1,padding:8,backgroundColor:"#ed4245",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){dt(),Ee([])}},e.React.createElement(c,{style:{color:"#fff",fontSize:10}},"\u{1F5D1}\uFE0F Clear")),e.React.createElement(m,{key:"copy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){G(ne.join(`
`))&&E.showToast("\u{1F4CB} Logs copied!",v.getAssetIDByName("Check"))}},e.React.createElement(c,{style:{color:"#fff",fontSize:10}},"\u{1F4CB} Copy"))])]),e.React.createElement(h,{key:"module-status",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"t",style:{color:"#fff",fontSize:12,fontWeight:"bold",marginBottom:6}},"\u{1F4E6} Module Status"),e.React.createElement(c,{key:"m1",style:{color:de?"#43b581":"#ed4245",fontSize:10}},`UserProfileHeader: ${de?"\u2705":"\u274C"}`),e.React.createElement(c,{key:"m2",style:{color:M?"#43b581":"#ed4245",fontSize:10}},`ChannelLongPress: ${M?"\u2705":"\u274C"}`),e.React.createElement(c,{key:"m3",style:{color:U?"#43b581":"#ed4245",fontSize:10}},`ActionSheet: ${U?"\u2705":"\u274C"}`),e.React.createElement(c,{key:"m4",style:{color:fe?"#43b581":"#ed4245",fontSize:10}},`Commands: ${fe?"\u2705":"\u274C"}`),e.React.createElement(c,{key:"m5",style:{color:"#949ba4",fontSize:10,marginTop:4}},`Patches active: ${w.length}`)]),...ne.map(function(a,u){return e.React.createElement(c,{key:`log${u}`,style:{color:a.includes("ERROR")?"#ed4245":a.includes("SUCCESS")?"#43b581":"#b5bac1",fontSize:9,paddingHorizontal:8,paddingVertical:2,fontFamily:"monospace"}},a)}),ne.length===0&&e.React.createElement(c,{key:"no-logs",style:{color:"#949ba4",textAlign:"center",marginTop:20,fontSize:11}},"No logs yet")]])}function _e(){const[t,n]=e.React.useState(!1);return e.React.useEffect(function(){return o("POPUP","Popup dashboard registered"),function(){}},[]),re?t?e.React.createElement(re,{visible:!0,animationType:"slide",presentationStyle:"fullScreen",onRequestClose:function(){return n(!1)}},e.React.createElement(h,{style:{flex:1,backgroundColor:"#1e1f22"}},[e.React.createElement(h,{key:"header",style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:12,backgroundColor:"#2b2d31",borderBottomWidth:1,borderBottomColor:"#1e1f22"}},[e.React.createElement(c,{key:"title",style:{color:"#fff",fontSize:16,fontWeight:"bold"}},"\u{1F50D} Stalker Pro"),e.React.createElement(m,{key:"close",style:{padding:8,backgroundColor:"#ed4245",borderRadius:6},onPress:function(){return n(!1)}},e.React.createElement(c,{style:{color:"#fff",fontWeight:"bold"}},"\u2715 Close"))]),e.React.createElement(Ve,{key:"content"})])):null:(o("POPUP","Modal not available"),null)}const Pt=Ve;function $t(t,n){x={type:t,id:n},o("ACTION",`Set context: ${t} = ${n}`),E.showToast("\u{1F50D} Open plugin settings to view!",v.getAssetIDByName("Check"))}const At=function(){o("LOAD","=== STALKER PRO v6.1-dev ==="),o("INIT",`Modal available: ${!!re}`);const t=d.findByName("App",!1)||d.findByName("AppContainer",!1)||d.findByName("Navigator",!1);if(t)try{w.push(j.after("default",t,function(n,r){return r&&e.React.createElement(h,{style:{flex:1}},[r,e.React.createElement(_e,{key:"stalker-popup"})])})),o("PATCH","\u2705 App container patched for popup")}catch(n){o("ERROR",`App container patch failed: ${n}`)}else{o("INIT","App container not found, trying alternative...");const n=d.findByName("Chat",!1)||d.findByName("ChatContainer",!1);if(n)try{w.push(j.after("default",n,function(r,s){return s&&e.React.createElement(h,{style:{flex:1}},[s,e.React.createElement(_e,{key:"stalker-popup"})])})),o("PATCH","\u2705 Chat container patched for popup")}catch(r){o("ERROR",`Chat container patch failed: ${r}`)}}if(W!=null&&W.can)try{w.push(j.after("can",W,function([n,r],s){return r!=null&&r.realCheck?s:Z&&n===Le?!0:s})),o("PATCH","\u2705 Permissions.can patched")}catch(n){o("ERROR",`Permissions.can patch failed: ${n}`)}if(M)try{w.push(j.after("default",M,function(n,r){var s,i,l,f,R,S,k;try{const y=n[0];if(y){const I=Object.keys(y);o("STRUCT",`Props keys: ${I.join(", ")}`);const P=((s=y?.channel)==null?void 0:s.id)||y?.channelId||y?.id,Y=((i=y?.channel)==null?void 0:i.name)||y?.name||"unknown";o("CHANNEL",`LongPress: ${Y} (${P})`);for(const q of I.slice(0,5)){const F=y[q],ee=typeof F;if(ee==="object"&&F!==null){const be=Object.keys(F).slice(0,3);o("STRUCT",`  props.${q} = {${be.join(", ")}...}`)}else o("STRUCT",`  props.${q} = ${ee}`)}}if(r&&(o("STRUCT",`res type: ${((l=r.type)==null?void 0:l.name)||((f=r.type)==null?void 0:f.displayName)||typeof r.type}`),r.props)){const I=Object.keys(r.props);if(o("STRUCT",`res.props keys: ${I.join(", ")}`),r.props.children){const P=r.props.children;Array.isArray(P)?o("STRUCT",`res.props.children = Array(${P.length})`):P&&typeof P=="object"?o("STRUCT",`res.props.children = ${((R=P.type)==null?void 0:R.name)||((S=P.type)==null?void 0:S.displayName)||"object"}`):o("STRUCT",`res.props.children = ${typeof P}`)}}const g=y?.channelId,T=(k=r?.props)==null?void 0:k.channel,D=T?.name||"this channel";o("INJECT",`Wrapping with button for: ${D} (${g})`);const L=e.React.createElement(m,{key:"stalker-action",style:{flexDirection:"row",alignItems:"center",paddingVertical:14,paddingHorizontal:20,backgroundColor:"#2b2d31",marginHorizontal:12,marginTop:8,marginBottom:12,borderRadius:12,borderWidth:1,borderColor:"#5865F2"},onPress:function(){var I;o("ACTION",`Stalker button pressed for ${g}`),(I=U?.hideActionSheet)==null||I.call(U),setTimeout(function(){Nt(g)},100)}},[e.React.createElement(c,{key:"icon",style:{fontSize:18,marginRight:12}},"\u{1F50D}"),e.React.createElement(h,{key:"txt",style:{flex:1}},[e.React.createElement(c,{key:"t1",style:{color:"#fff",fontSize:15,fontWeight:"bold"}},"Stalker Pro"),e.React.createElement(c,{key:"t2",style:{color:"#b5bac1",fontSize:11}},"Quick Info + Copy ID")]),e.React.createElement(c,{key:"arrow",style:{color:"#5865F2",fontSize:14}},"\u2192")]);return e.React.createElement(h,{key:"stalker-wrapper",style:{flex:1}},[r,L])}catch(y){return o("ERROR",`ChannelLongPress inject failed: ${y}`),r}})),o("PATCH","\u2705 ChannelLongPress patched (v5.4 - wrapper)")}catch(n){o("ERROR",`ChannelLongPress patch failed: ${n}`)}if(ue)try{w.push(j.after("default",ue,function(n,r){var s;try{const i=n[0],l=((s=i?.user)==null?void 0:s.id)||i?.userId;l&&o("PROFILE",`ProfileBanner rendered: ${l}`)}catch(i){o("ERROR",`ProfileBanner read failed: ${i}`)}return r})),o("PATCH","\u2705 ProfileBanner patched (monitoring)")}catch(n){o("ERROR",`ProfileBanner patch failed: ${n}`)}if(H)try{w.push(j.after("default",H,function(n,r){var s;try{const i=n[0],l=((s=i?.user)==null?void 0:s.id)||i?.userId;if(l&&(o("PROFILE",`UserProfileSection rendered: ${l}`),r&&r.props&&r.props.children)){const f=e.React.createElement(m,{key:"stalker-section",style:{backgroundColor:"#2b2d31",margin:12,padding:12,borderRadius:8,flexDirection:"row",alignItems:"center"},onPress:function(){o("ACTION",`Stalker pressed for user: ${l}`),$t("user",l)}},[e.React.createElement(c,{key:"icon",style:{fontSize:16,marginRight:8}},"\u{1F50D}"),e.React.createElement(c,{key:"text",style:{color:"#fff",fontSize:14}},"Stalker Pro")]),R=r.props.children;Array.isArray(R)&&(R.push(f),o("INJECT","\u2705 Added section to profile"))}}catch(i){o("ERROR",`UserProfileSection inject failed: ${i}`)}return r})),o("PATCH","\u2705 UserProfileSection patched (with injection)")}catch(n){o("ERROR",`UserProfileSection patch failed: ${n}`)}B!=null&&B.getString&&(X=setInterval(It,2e3),o("LOAD","\u2705 Clipboard monitor started")),o("LOAD",`Total patches: ${w.length}`),E.showToast("\u{1F50D} Stalker Pro v5.1-dev",v.getAssetIDByName("Check"))},Bt=function(){o("UNLOAD","Cleaning up..."),X&&(clearInterval(X),X=null);const t=w.length;for(const n of w)try{n()}catch{}w=[],Z=!1,_=!1,o("UNLOAD",`Removed ${t} patches`)};return J.onLoad=At,J.onUnload=Bt,J.settings=Pt,J})({},vendetta,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.ui.toasts,vendetta.patcher);
