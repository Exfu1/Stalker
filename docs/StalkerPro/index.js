(function(X,qe,u,e,Qe,R,b,Z){"use strict";var Xe=Object.defineProperty,Ze=Object.defineProperties,et=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,Ee=(t,n,o)=>n in t?Xe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,Ce=(t,n)=>{for(var o in n||(n={}))tt.call(n,o)&&Ee(t,o,n[o]);if(ve)for(var o of ve(n))nt.call(n,o)&&Ee(t,o,n[o]);return t},me=(t,n)=>Ze(t,et(n)),Te,Ie,Ne,Ae,Pe,$e,Be,we;const{ScrollView:rt,View:p,Text:c,TouchableOpacity:m,TextInput:De}=Qe.General,le=((Te=e.ReactNative)==null?void 0:Te.BackHandler)||u.findByProps("addEventListener","removeEventListener","exitApp"),B=u.findByStoreName("UserStore"),I=u.findByStoreName("GuildStore"),P=u.findByStoreName("GuildMemberStore"),S=u.findByStoreName("ChannelStore"),w=u.findByStoreName("SelectedGuildStore"),ie=u.findByStoreName("GuildChannelStore"),oe=u.findByStoreName("GuildRoleStore"),W=u.findByProps("getChannelPermissions","can"),{getChannel:Fe}=u.findByProps("getChannel")||{},se=((Ie=u.findByProps("ChannelTypes"))==null?void 0:Ie.ChannelTypes)||{},$=((Ne=e.ReactNative)==null?void 0:Ne.Clipboard)||u.findByProps("setString","getString"),ce=u.findByProps("getAPIBaseURL","get")||u.findByProps("API_HOST","get");let _=[];const at=50;function l(t,n){const o=`[${new Date().toLocaleTimeString()}] [${t}] ${n}`;_.unshift(o),_.length>at&&_.pop(),qe.logger.log(o)}function de(){return _}function lt(){_=[]}l("INIT","Starting module discovery...");const ue=u.findByName("UserProfileHeader",!1);(Ae=u.findByProps("UserProfileActions"))==null||Ae.UserProfileActions;const H=u.findByName("UserProfileSection",!1),fe=u.findByName("ProfileBanner",!1),L=u.findByName("ChannelLongPressActionSheet",!1),it=u.findByName("ChannelLongPress",!1);u.findByName("ChannelContextMenu",!1),u.findByProps("openContextMenu","closeContextMenu");const ot=u.findByProps("ChannelLongPressActionSheet");u.findByProps("openLazy","hideActionSheet");const x=u.findByProps("openLazy","hideActionSheet");u.findByName("ActionSheetRow",!1),u.findByName("ActionSheetTitleHeader",!1),u.findByName("ActionSheetCloseButton",!1);const st=(Pe=u.findByProps("NavigationContainer"))==null?void 0:Pe.default;u.findByProps("createStackNavigator");const ct=($e=u.findByProps("useNavigation"))==null?void 0:$e.useNavigation,ye=u.findByProps("registerCommand","unregisterCommand");if(l("INIT",`UserProfileHeader: ${!!ue}`),l("INIT",`UserProfileSection: ${!!H}`),l("INIT",`ProfileBanner: ${!!fe}`),l("INIT",`ChannelLongPress: ${!!L}`),l("INIT",`ChannelLongPress2: ${!!it}`),l("INIT",`ChannelActionSheet: ${!!ot}`),l("INIT",`ActionSheet: ${!!x}`),l("INIT",`Commands: ${!!ye}`),l("INIT",`NavigationNative: ${!!st}`),l("INIT",`useNavigation: ${!!ct}`),L)try{const t=Object.keys(L);l("KEYS",`ChannelLongPress keys: ${t.join(", ")||"none"}`),typeof L=="function"&&l("KEYS","ChannelLongPress is a function")}catch(t){l("ERROR",`Keys read failed: ${t}`)}if(H)try{const t=Object.keys(H);l("KEYS",`UserProfileSection keys: ${t.join(", ")||"none"}`),typeof H=="function"&&l("KEYS","UserProfileSection is a function")}catch(t){l("ERROR",`Keys read failed: ${t}`)}if(x)try{const t=Object.keys(x);l("KEYS",`ActionSheet keys: ${t.join(", ")||"none"}`)}catch(t){l("ERROR",`Keys read failed: ${t}`)}const D=u.findByProps("pushLazy","popLazy")||u.findByProps("push","pop")||u.findByProps("navigate"),G=u.findByProps("transitionTo","back"),U=u.findByProps("open","openSection")||u.findByName("SettingsRouter",!1);if(l("INIT",`Navigation: ${!!D}`),l("INIT",`NavigationRouter: ${!!G}`),l("INIT",`SettingsRouter: ${!!U}`),D)try{const t=Object.keys(D);l("KEYS",`Navigation keys: ${t.join(", ")||"none"}`)}catch(t){l("ERROR",`Navigation keys failed: ${t}`)}if(G)try{const t=Object.keys(G);l("KEYS",`NavigationRouter keys: ${t.join(", ")||"none"}`)}catch(t){l("ERROR",`NavigationRouter keys failed: ${t}`)}const ze=((we=(Be=e.constants)==null?void 0:Be.Permissions)==null?void 0:we.VIEW_CHANNEL)||1024,dt={1:"Create Invite",2:"Kick Members",4:"Ban Members",8:"Administrator",16:"Manage Channels",32:"Manage Server",64:"Add Reactions",128:"View Audit Log",256:"Priority Speaker",512:"Stream",1024:"View Channel",2048:"Send Messages",4096:"Send TTS",8192:"Manage Messages",16384:"Embed Links",32768:"Attach Files",65536:"Read History",131072:"Mention Everyone",262144:"Use External Emoji",524288:"View Insights",1048576:"Connect",2097152:"Speak",4194304:"Mute Members",8388608:"Deafen Members",16777216:"Move Members",33554432:"Use VAD",67108864:"Change Nickname",134217728:"Manage Nicknames",268435456:"Manage Roles",536870912:"Manage Webhooks",1073741824:"Manage Emojis"};let ge=!0,K=!1,he="",ee=null,F=[],te=!1,z={type:null,id:null};const Oe=[se.DM,se.GROUP_DM,se.GUILD_CATEGORY];function pe(t,n){if(!(!e.FluxDispatcher||n.length===0))try{e.FluxDispatcher.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[t],userIds:n})}catch{}}function ut(t){var n,o;if(!t||(typeof t=="string"&&(t=Fe?.(t)||((n=S?.getChannel)==null?void 0:n.call(S,t))),!t||Oe.includes(t.type)))return!1;t.realCheck=!0;const s=!((o=W?.can)!=null&&o.call(W,ze,t));return delete t.realCheck,s}function Le(t){const n=Number(t),o=[];for(const[s,i]of Object.entries(dt))n&Number(s)&&o.push(i);return o}function ft(t,n){var o,s,i;try{const a=(o=I?.getGuild)==null?void 0:o.call(I,n);if((s=a?.roles)!=null&&s[t])return{name:a.roles[t].name,color:a.roles[t].color||0,found:!0}}catch{}try{if(oe){const a=(i=oe.getRole)==null?void 0:i.call(oe,n,t);if(a)return{name:a.name,color:a.color||0,found:!0}}}catch{}return{name:`Role ID: ${t}`,color:5793266,found:!1}}function yt(t,n){var o,s;const i=(o=B?.getUser)==null?void 0:o.call(B,t),a=(s=P?.getMember)==null?void 0:s.call(P,n,t);return i?{name:a?.nick||i.globalName||i.username,isFetched:!0}:{name:`User ID: ${t}`,isFetched:!1}}function ne(t,n){const o=[],s=[];try{const i=t.permissionOverwrites||{};for(const[a,f]of Object.entries(i)){if(!f)continue;const k=Number(f.allow||0),E=Number(f.deny||0),y=f.type===0||f.type==="role",M=y?"role":"user";let h="",N=0,j=!1,T=!0;if(y)if(a===n)h="@everyone",N=10070709;else{const C=ft(a,n);h=C.name,N=C.color,j=!C.found}else{s.push(a);const C=yt(a,n);h=C.name,T=C.isFetched,j=!T}o.push({id:a,name:h,type:M,color:N,allowed:Le(k),denied:Le(E),isUnknown:j,isFetched:T})}o.sort(function(a,f){return a.name==="@everyone"?-1:f.name==="@everyone"?1:a.type!==f.type?a.type==="role"?-1:1:a.name.localeCompare(f.name)})}catch{}return{overwrites:o,userIds:s}}function xe(t){switch(t){case 0:return"\u{1F4AC}";case 2:return"\u{1F50A}";case 4:return"\u{1F4C1}";case 5:return"\u{1F4E2}";case 13:return"\u{1F3AD}";case 15:return"\u{1F4CB}";default:return"\u{1F4DD}"}}function gt(t){var n,o;const s=new Map;try{const i=(n=S?.getMutableGuildChannelsForGuild)==null?void 0:n.call(S,t);if(i)for(const a of Array.isArray(i)?i:Object.values(i))a!=null&&a.id&&s.set(a.id,a)}catch{}try{const i=(o=S?.getMutableGuildChannels)==null?void 0:o.call(S);if(i)for(const a of Object.values(i))a?.guild_id===t&&a!=null&&a.id&&s.set(a.id,a)}catch{}try{if(ie!=null&&ie.getChannels){const i=ie.getChannels(t);if(i){const a=function(f){if(Array.isArray(f))for(const k of f){const E=k?.channel||k;E!=null&&E.id&&s.set(E.id,E)}};if(Array.isArray(i))a(i);else for(const f of Object.keys(i))Array.isArray(i[f])&&a(i[f])}}}catch{}return Array.from(s.values())}function Ue(t){var n,o;const s=[];te=!0;try{const i=gt(t);for(const a of i)!(a!=null&&a.id)||a.type===4||a.type===1||a.type===3||a.type===11||a.type===12||Oe.includes(a.type)||ut(a)&&s.push({id:a.id,name:a.name||"unknown",type:a.type||0,parentName:a.parent_id&&((o=(n=S?.getChannel)==null?void 0:n.call(S,a.parent_id))==null?void 0:o.name)||"",permissions:ne(a,t),guildId:t})}catch(i){l("ERROR",`getHiddenChannels: ${i}`)}finally{te=!1}return s.sort(function(i,a){return i.name.localeCompare(a.name)})}function ht(t,n,o){var s;const i=(s=P?.getMember)==null?void 0:s.call(P,o,t);if(!i)return!1;const a=i.roles||[];for(const f of n.permissions.overwrites)if(f.type==="user"&&f.id===t&&f.allowed.includes("View Channel")||f.type==="role"&&a.includes(f.id)&&f.allowed.includes("View Channel"))return!0;return!1}function pt(t,n){return Ue(n).filter(function(o){return ht(t,o,n)})}function Me(t){if(!I||!P)return[];try{return Object.values(I.getGuilds()||{}).filter(function(n){return P.getMember(n.id,t)})}catch{return[]}}async function je(t,n){var o,s,i;if(!(ce!=null&&ce.get))return[];try{const a=await ce.get({url:`/guilds/${t}/messages/search`,query:{author_id:n,include_nsfw:!0,sort_by:"timestamp",sort_order:"desc"}}),f=((s=(o=I?.getGuild)==null?void 0:o.call(I,t))==null?void 0:s.name)||"Unknown Server";return(((i=a?.body)==null?void 0:i.messages)||[]).map(function(k){var E,y;return{id:k[0].id,content:k[0].content||"[No text]",channelId:k[0].channel_id,channelName:((y=(E=S?.getChannel)==null?void 0:E.call(S,k[0].channel_id))==null?void 0:y.name)||"unknown",guildId:t,guildName:f,timestamp:k[0].timestamp}})}catch{return[]}}function Y(t){return $!=null&&$.setString?($.setString(t),he=t,!0):!1}function Rt(t,n){Y(t)&&b.showToast(`\u{1F4CB} ${n==="role"?"Role":"User"} ID copied!`,R.getAssetIDByName("Check"))}async function bt(t){var n;const o=(n=B?.getCurrentUser)==null?void 0:n.call(B);if(o&&t===o.id)return;const s=Me(t);if(s.length===0){b.showToast("\u274C No mutual servers",R.getAssetIDByName("Small"));return}b.showToast("\u{1F50D} Searching...",R.getAssetIDByName("ic_search"));let i=[];for(let k=0;k<Math.min(s.length,8);k++){try{i.push(...await je(s[k].id,t))}catch{}k<s.length-1&&await new Promise(function(E){return setTimeout(E,250)})}if(i.sort(function(k,E){return new Date(E.timestamp).getTime()-new Date(k.timestamp).getTime()}),i.length===0){b.showToast("\u{1F4ED} No messages",R.getAssetIDByName("Small"));return}const a=i[0],f=`https://discord.com/channels/${a.guildId}/${a.channelId}/${a.id}`;b.showToast(`\u2705 Found ${i.length}!`,R.getAssetIDByName("Check")),setTimeout(function(){Y(f)&&b.showToast("\u{1F4CB} Copied latest!",R.getAssetIDByName("Check"))},1500)}async function St(){if(!(K||!ge))try{if(!($!=null&&$.getString))return;const t=await $.getString();t&&t!==he&&/^\d{17,19}$/.test(t.trim())&&(he=t,b.showToast("\u{1F3AF} ID detected!",R.getAssetIDByName("Check")),setTimeout(function(){return bt(t.trim())},1e3))}catch{}}function kt(t){const n=Date.now()-new Date(t).getTime(),o=Math.floor(n/6e4),s=Math.floor(o/60),i=Math.floor(s/24);return i>0?`${i}d ago`:s>0?`${s}h ago`:`${o}m ago`}function vt(){l("NAV","Attempting to open Stalker dashboard...");try{if(G!=null&&G.transitionTo){l("NAV","Trying NavigationRouter.transitionTo...");const t=["/settings/plugins","VendettaPlugins","PluginSettings","/channels/@me"];for(const n of t)try{G.transitionTo(n),l("NAV",`\u2705 transitionTo('${n}') called`);return}catch(o){l("NAV",`transitionTo('${n}') failed: ${o}`)}}if(D!=null&&D.pushLazy||D!=null&&D.push){l("NAV","Trying Navigation.push...");const t=D.pushLazy||D.push;try{t("VendettaPlugins"),l("NAV","\u2705 push('VendettaPlugins') called");return}catch(n){l("NAV",`push failed: ${n}`)}}if(U!=null&&U.open||U!=null&&U.openSection){l("NAV","Trying SettingsRouter...");try{(U.open||U.openSection)("plugins"),l("NAV","\u2705 SettingsRouter called");return}catch(t){l("NAV",`SettingsRouter failed: ${t}`)}}l("NAV","\u274C All navigation methods failed"),b.showToast("\u{1F4F1} Go to: Settings \u2192 Plugins \u2192 Stalker Pro",R.getAssetIDByName("Check"))}catch(t){l("ERROR",`openStalkerDashboard failed: ${t}`),b.showToast("\u{1F4F1} Go to: Settings \u2192 Plugins \u2192 Stalker Pro",R.getAssetIDByName("Check"))}}function Et(){var t,n,o;const[s,i]=e.React.useState("hidden"),[a,f]=e.React.useState([]),[k,E]=e.React.useState(!1),[y,M]=e.React.useState(null),[h,N]=e.React.useState(null),[j,T]=e.React.useState("Tap 'Scan' to find hidden channels"),[C,J]=e.React.useState(""),[V,q]=e.React.useState([]),[O,Re]=e.React.useState(null),[Nt,Ve]=e.React.useState(!1),[We,He]=e.React.useState(""),[At,be]=e.React.useState(!1),[Se,Ge]=e.React.useState([]),[re,Pt]=e.React.useState(ge),[ae,ke]=e.React.useState(de());e.React.useState(0),e.React.useEffect(function(){var r,d;if(z.type==="user"&&z.id)J(z.id),i("user"),z={type:null,id:null};else if(z.type==="channel"&&z.id){const g=(r=w?.getGuildId)==null?void 0:r.call(w);if(g){const v=(d=S?.getChannel)==null?void 0:d.call(S,z.id);if(v){const A={id:v.id,name:v.name,type:v.type,parentName:"",permissions:ne(v,g),guildId:g};N(A),i("perms")}}z={type:null,id:null}}},[]),e.React.useEffect(function(){var r,d,g;K=!0;const v=(r=w?.getGuildId)==null?void 0:r.call(w);v&&M((d=I?.getGuild)==null?void 0:d.call(I,v));const A=(g=le?.addEventListener)==null?void 0:g.call(le,"hardwareBackPress",function(){return h?(N(null),s==="perms"&&i("hidden"),!0):s!=="hidden"?(i("hidden"),!0):!1});return function(){var Je;K=!1,(Je=A?.remove)==null||Je.call(A)}},[h,s]),e.React.useEffect(function(){if(h&&h.permissions.userIds.length>0){pe(h.guildId,h.permissions.userIds);const r=setTimeout(function(){var d;if(h&&y){const g=(d=S?.getChannel)==null?void 0:d.call(S,h.id);g&&N(me(Ce({},h),{permissions:ne(g,y.id)}))}},1500);return function(){return clearTimeout(r)}}},[h?.id]);const $t=function(){var r,d;E(!0),f([]);try{const g=(r=w?.getGuildId)==null?void 0:r.call(w);if(g){M((d=I?.getGuild)==null?void 0:d.call(I,g));const v=Ue(g);f(v),T(`Scanned \u2192 ${v.length} hidden`),b.showToast(v.length>0?`\u{1F512} ${v.length} hidden!`:"\u2728 No hidden",R.getAssetIDByName("Check"))}else M(null),T("Open a server first")}catch(g){T(`Error: ${g}`)}finally{E(!1)}},Bt=function(){h&&y&&(pe(y.id,h.permissions.userIds),setTimeout(function(){var r;const d=(r=S?.getChannel)==null?void 0:r.call(S,h.id);d&&(N(me(Ce({},h),{permissions:ne(d,y.id)})),b.showToast("\u{1F504} Refreshed!",R.getAssetIDByName("Check")))},500))},wt=function(){const r=C.trim();if(!r||r.length<17){b.showToast("Enter valid ID",R.getAssetIDByName("Small"));return}if(!y){b.showToast("Open a server first",R.getAssetIDByName("Small"));return}Ve(!0),pe(y.id,[r]),setTimeout(function(){var d,g;const v=(d=B?.getUser)==null?void 0:d.call(B,r),A=(g=P?.getMember)==null?void 0:g.call(P,y.id,r);Re({user:v,member:A,id:r}),q(pt(r,y.id)),Ve(!1)},500)},Dt=async function(){const r=We.trim();if(!r||r.length<17){b.showToast("Enter valid ID",R.getAssetIDByName("Small"));return}be(!0),Ge([]);const d=Me(r);if(d.length===0){b.showToast("\u274C No mutual servers",R.getAssetIDByName("Small")),be(!1);return}b.showToast("\u{1F50D} Searching...",R.getAssetIDByName("ic_search"));let g=[];for(let v=0;v<Math.min(d.length,8);v++){try{g.push(...await je(d[v].id,r))}catch{}v<d.length-1&&await new Promise(function(A){return setTimeout(A,250)})}g.sort(function(v,A){return new Date(A.timestamp).getTime()-new Date(v.timestamp).getTime()}),Ge(g),be(!1),b.showToast(g.length>0?`\u2705 ${g.length} messages!`:"\u{1F4ED} No messages",R.getAssetIDByName("Check"))},Ft=function(r){const d=`https://discord.com/channels/${r.guildId}/${r.channelId}/${r.id}`;Y(d)&&b.showToast("\u{1F4CB} Link copied!",R.getAssetIDByName("Check"))},_e=async function(r){var d;try{const g=await((d=$?.getString)==null?void 0:d.call($));g&&(r(g.trim()),b.showToast("\u{1F4CB} Pasted!",R.getAssetIDByName("Check")))}catch{}},zt=function(r){ge=r,Pt(r),b.showToast(r?"\u2705 Auto-search enabled":"\u274C Auto-search disabled",R.getAssetIDByName("Check"))},Ke=function(r){return r?`#${r.toString(16).padStart(6,"0")}`:"#99AAB5"},Q=function({id:r,label:d,icon:g}){return e.React.createElement(m,{style:{flex:1,padding:6,backgroundColor:s===r?"#5865F2":"#2b2d31",borderRadius:6,marginHorizontal:1},onPress:function(){i(r),r!=="perms"&&N(null),r==="debug"&&ke(de())}},e.React.createElement(c,{style:{color:"#fff",textAlign:"center",fontSize:9,fontWeight:s===r?"bold":"normal"}},`${g}${d}`))},Ye=function({ch:r,onPress:d}){return e.React.createElement(m,{style:{margin:6,padding:10,backgroundColor:"#2b2d31",borderRadius:10,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:d},[e.React.createElement(p,{key:"h",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(c,{key:"i",style:{fontSize:14,marginRight:6}},xe(r.type)),e.React.createElement(p,{key:"n",style:{flex:1}},[e.React.createElement(c,{key:"nm",style:{color:"#fff",fontSize:13,fontWeight:"bold"}},r.name),r.parentName&&e.React.createElement(c,{key:"p",style:{color:"#949ba4",fontSize:10}},`in ${r.parentName}`)]),e.React.createElement(c,{key:"a",style:{color:"#5865F2",fontSize:10}},"\u2192")])])},Ot=function({ow:r}){return e.React.createElement(m,{style:{margin:4,marginHorizontal:6,padding:8,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:r.type==="role"?Ke(r.color):"#43b581"},onPress:function(){return Rt(r.id,r.type)}},[e.React.createElement(p,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:3}},[e.React.createElement(c,{key:"t",style:{fontSize:11,marginRight:4}},r.type==="role"?"\u{1F3F7}\uFE0F":"\u{1F464}"),e.React.createElement(p,{key:"nw",style:{flex:1}},[e.React.createElement(c,{key:"n",style:{color:r.type==="role"?Ke(r.color):"#43b581",fontSize:12,fontWeight:"bold"}},r.name),!r.isFetched&&r.type==="user"&&e.React.createElement(c,{key:"hint",style:{color:"#949ba4",fontSize:9}},"Tap refresh")]),e.React.createElement(p,{key:"b",style:{backgroundColor:r.type==="role"?"#5865F2":"#43b581",paddingHorizontal:5,paddingVertical:2,borderRadius:3}},e.React.createElement(c,{style:{color:"#fff",fontSize:8,fontWeight:"bold"}},r.type==="role"?"ROLE":"USER")),e.React.createElement(c,{key:"copy",style:{color:"#949ba4",fontSize:9,marginLeft:4}},"\u{1F4CB}")]),r.allowed.length>0&&e.React.createElement(p,{key:"a",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},r.allowed.map(function(d,g){return e.React.createElement(c,{key:`a${g}`,style:{color:"#43b581",fontSize:9,backgroundColor:"rgba(67,181,129,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u2705${d}`)})),r.denied.length>0&&e.React.createElement(p,{key:"d",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},r.denied.map(function(d,g){return e.React.createElement(c,{key:`d${g}`,style:{color:"#ed4245",fontSize:9,backgroundColor:"rgba(237,66,69,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u274C${d}`)}))])};return e.React.createElement(rt,{style:{flex:1,backgroundColor:"#1e1f22"}},[e.React.createElement(p,{key:"h",style:{padding:10,backgroundColor:"#2b2d31",marginBottom:6}},[e.React.createElement(c,{key:"t",style:{color:"#fff",fontSize:16,fontWeight:"bold",textAlign:"center"}},"\u{1F50D} Stalker Pro v5.7-dev"),e.React.createElement(c,{key:"s",style:{color:"#b5bac1",fontSize:10,textAlign:"center"}},y?`\u{1F4CD} ${y.name}`:"Open a server")]),e.React.createElement(p,{key:"tabs",style:{flexDirection:"row",padding:4,marginBottom:4}},[e.React.createElement(Q,{key:"1",id:"hidden",label:"Hidden",icon:"\u{1F512}"}),e.React.createElement(Q,{key:"2",id:"perms",label:"Perms",icon:"\u{1F510}"}),e.React.createElement(Q,{key:"3",id:"user",label:"User",icon:"\u{1F464}"}),e.React.createElement(Q,{key:"4",id:"search",label:"Msgs",icon:"\u{1F4AC}"}),e.React.createElement(Q,{key:"5",id:"debug",label:"Debug",icon:"\u{1F41B}"})]),s==="hidden"&&[e.React.createElement(m,{key:"scan",style:{margin:8,padding:12,backgroundColor:"#5865F2",borderRadius:8,alignItems:"center"},onPress:$t},e.React.createElement(c,{style:{color:"#fff",fontWeight:"bold",fontSize:14}},k?"\u23F3 Scanning...":"\u{1F504} Scan Server")),e.React.createElement(c,{key:"dbg",style:{color:"#949ba4",textAlign:"center",fontSize:10,marginBottom:6}},j),...a.map(function(r,d){return e.React.createElement(Ye,{key:`c${d}`,ch:r,onPress:function(){N(r),i("perms")}})}),a.length===0&&!k&&e.React.createElement(p,{key:"empty",style:{padding:30,alignItems:"center"}},[e.React.createElement(c,{key:"e1",style:{fontSize:30}},"\u{1F512}"),e.React.createElement(c,{key:"e2",style:{color:"#b5bac1",fontSize:12,marginTop:6,textAlign:"center"}},"Tap 'Scan Server' to find hidden channels")])],s==="perms"&&[!h&&e.React.createElement(p,{key:"no-sel",style:{padding:30,alignItems:"center"}},[e.React.createElement(c,{key:"t1",style:{fontSize:30}},"\u{1F510}"),e.React.createElement(c,{key:"t2",style:{color:"#fff",fontSize:13,marginTop:6}},"Select a channel")]),h&&[e.React.createElement(p,{key:"ch-hdr",style:{padding:10,backgroundColor:"#2b2d31",margin:6,borderRadius:8}},[e.React.createElement(p,{key:"r",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(c,{key:"i",style:{fontSize:18,marginRight:8}},xe(h.type)),e.React.createElement(c,{key:"n",style:{color:"#fff",fontSize:14,fontWeight:"bold",flex:1}},h.name)])]),e.React.createElement(p,{key:"btns",style:{flexDirection:"row",margin:6,marginTop:0}},[e.React.createElement(m,{key:"ref",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginRight:2,alignItems:"center"},onPress:Bt},e.React.createElement(c,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(m,{key:"cpy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:2,alignItems:"center"},onPress:function(){Y(h.id)&&b.showToast("\u{1F4CB} Channel ID copied",R.getAssetIDByName("Check"))}},e.React.createElement(c,{style:{color:"#b5bac1",fontSize:9}},"\u{1F4CB} Channel ID"))]),e.React.createElement(c,{key:"hint",style:{color:"#949ba4",fontSize:9,textAlign:"center",marginBottom:4}},"Tap any role/user to copy ID"),...h.permissions.overwrites.map(function(r,d){return e.React.createElement(Ot,{key:`ow-${d}`,ow:r})})]],s==="user"&&[e.React.createElement(p,{key:"input-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F464} User ID Lookup"),e.React.createElement(p,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(De,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:C,onChangeText:J}),e.React.createElement(m,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return _e(J)}},e.React.createElement(c,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(m,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:wt},e.React.createElement(c,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},Nt?"\u23F3...":"\u{1F50D} Find Hidden Channels"))]),O&&e.React.createElement(p,{key:"user-info",style:{margin:8,marginTop:0,padding:8,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"name",style:{color:"#fff",fontSize:12,fontWeight:"bold"}},((t=O.member)==null?void 0:t.nick)||((n=O.user)==null?void 0:n.globalName)||((o=O.user)==null?void 0:o.username)||`User ${O.id.slice(-6)}`),e.React.createElement(c,{key:"access",style:{color:"#43b581",fontSize:10,marginTop:2}},`\u2705 Can access ${V.length} hidden channels`)]),...V.map(function(r,d){return e.React.createElement(Ye,{key:`uc${d}`,ch:r,onPress:function(){N(r),i("perms")}})}),O&&V.length===0&&e.React.createElement(c,{key:"no",style:{color:"#949ba4",textAlign:"center",fontSize:11,marginTop:10}},"No hidden channel access")],s==="search"&&[e.React.createElement(p,{key:"auto-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(p,{key:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},[e.React.createElement(p,{key:"txt"},[e.React.createElement(c,{key:"t",style:{color:"#fff",fontSize:11,fontWeight:"bold"}},"\u{1F4AC} Auto-Search"),e.React.createElement(c,{key:"s",style:{color:"#b5bac1",fontSize:9}},"Copy User ID \u2192 auto-copies latest message")]),e.React.createElement(m,{key:"toggle",style:{padding:8,backgroundColor:re?"#43b581":"#ed4245",borderRadius:6},onPress:function(){return zt(!re)}},e.React.createElement(c,{style:{color:"#fff",fontSize:10,fontWeight:"bold"}},re?"ON":"OFF"))]),e.React.createElement(c,{key:"note",style:{color:"#949ba4",fontSize:9,marginTop:6}},K?"\u23F8\uFE0F Paused while dashboard is open":re?"\u2705 Active":"\u274C Disabled")]),e.React.createElement(p,{key:"search-box",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F50D} Manual Search"),e.React.createElement(p,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(De,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:We,onChangeText:He}),e.React.createElement(m,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return _e(He)}},e.React.createElement(c,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(m,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:Dt},e.React.createElement(c,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},At?"\u23F3 Searching...":"\u{1F50D} Find Messages"))]),Se.length>0&&e.React.createElement(c,{key:"results-title",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginLeft:8,marginTop:4}},`\u{1F4DD} ${Se.length} Messages:`),...Se.slice(0,25).map(function(r,d){return e.React.createElement(m,{key:`msg${d}`,style:{margin:4,marginHorizontal:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:function(){return Ft(r)}},[e.React.createElement(p,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:4}},[e.React.createElement(c,{key:"ch",style:{color:"#5865F2",fontSize:11,flex:1}},`#${r.channelName}`),e.React.createElement(c,{key:"time",style:{color:"#949ba4",fontSize:9}},kt(r.timestamp))]),e.React.createElement(c,{key:"content",style:{color:"#dcddde",fontSize:11},numberOfLines:2},r.content),e.React.createElement(c,{key:"server",style:{color:"#72767d",fontSize:9,marginTop:4}},`\u{1F4CD} ${r.guildName}`)])})],s==="debug"&&[e.React.createElement(p,{key:"debug-header",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"t",style:{color:"#fff",fontSize:14,fontWeight:"bold"}},"\u{1F41B} Debug Logs"),e.React.createElement(c,{key:"s",style:{color:"#b5bac1",fontSize:10,marginTop:4}},`${ae.length} log entries`),e.React.createElement(p,{key:"btns",style:{flexDirection:"row",marginTop:8}},[e.React.createElement(m,{key:"refresh",style:{flex:1,padding:8,backgroundColor:"#5865F2",borderRadius:6,marginRight:4,alignItems:"center"},onPress:function(){return ke(de())}},e.React.createElement(c,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(m,{key:"clear",style:{flex:1,padding:8,backgroundColor:"#ed4245",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){lt(),ke([])}},e.React.createElement(c,{style:{color:"#fff",fontSize:10}},"\u{1F5D1}\uFE0F Clear")),e.React.createElement(m,{key:"copy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){Y(ae.join(`
`))&&b.showToast("\u{1F4CB} Logs copied!",R.getAssetIDByName("Check"))}},e.React.createElement(c,{style:{color:"#fff",fontSize:10}},"\u{1F4CB} Copy"))])]),e.React.createElement(p,{key:"module-status",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(c,{key:"t",style:{color:"#fff",fontSize:12,fontWeight:"bold",marginBottom:6}},"\u{1F4E6} Module Status"),e.React.createElement(c,{key:"m1",style:{color:ue?"#43b581":"#ed4245",fontSize:10}},`UserProfileHeader: ${ue?"\u2705":"\u274C"}`),e.React.createElement(c,{key:"m2",style:{color:L?"#43b581":"#ed4245",fontSize:10}},`ChannelLongPress: ${L?"\u2705":"\u274C"}`),e.React.createElement(c,{key:"m3",style:{color:x?"#43b581":"#ed4245",fontSize:10}},`ActionSheet: ${x?"\u2705":"\u274C"}`),e.React.createElement(c,{key:"m4",style:{color:ye?"#43b581":"#ed4245",fontSize:10}},`Commands: ${ye?"\u2705":"\u274C"}`),e.React.createElement(c,{key:"m5",style:{color:"#949ba4",fontSize:10,marginTop:4}},`Patches active: ${F.length}`)]),...ae.map(function(r,d){return e.React.createElement(c,{key:`log${d}`,style:{color:r.includes("ERROR")?"#ed4245":r.includes("SUCCESS")?"#43b581":"#b5bac1",fontSize:9,paddingHorizontal:8,paddingVertical:2,fontFamily:"monospace"}},r)}),ae.length===0&&e.React.createElement(c,{key:"no-logs",style:{color:"#949ba4",textAlign:"center",marginTop:20,fontSize:11}},"No logs yet")]])}const Ct=Et;function mt(t,n){z={type:t,id:n},l("ACTION",`Set context: ${t} = ${n}`),b.showToast("\u{1F50D} Open plugin settings to view!",R.getAssetIDByName("Check"))}const Tt=function(){if(l("LOAD","=== STALKER PRO v5.7-dev ==="),W!=null&&W.can)try{F.push(Z.after("can",W,function([t,n],o){return n!=null&&n.realCheck?o:te&&t===ze?!0:o})),l("PATCH","\u2705 Permissions.can patched")}catch(t){l("ERROR",`Permissions.can patch failed: ${t}`)}if(L)try{F.push(Z.after("default",L,function(t,n){var o,s,i,a,f,k,E;try{const y=t[0];if(y){const T=Object.keys(y);l("STRUCT",`Props keys: ${T.join(", ")}`);const C=((o=y?.channel)==null?void 0:o.id)||y?.channelId||y?.id,J=((s=y?.channel)==null?void 0:s.name)||y?.name||"unknown";l("CHANNEL",`LongPress: ${J} (${C})`);for(const V of T.slice(0,5)){const q=y[V],O=typeof q;if(O==="object"&&q!==null){const Re=Object.keys(q).slice(0,3);l("STRUCT",`  props.${V} = {${Re.join(", ")}...}`)}else l("STRUCT",`  props.${V} = ${O}`)}}if(n&&(l("STRUCT",`res type: ${((i=n.type)==null?void 0:i.name)||((a=n.type)==null?void 0:a.displayName)||typeof n.type}`),n.props)){const T=Object.keys(n.props);if(l("STRUCT",`res.props keys: ${T.join(", ")}`),n.props.children){const C=n.props.children;Array.isArray(C)?l("STRUCT",`res.props.children = Array(${C.length})`):C&&typeof C=="object"?l("STRUCT",`res.props.children = ${((f=C.type)==null?void 0:f.name)||((k=C.type)==null?void 0:k.displayName)||"object"}`):l("STRUCT",`res.props.children = ${typeof C}`)}}const M=y?.channelId,h=(E=n?.props)==null?void 0:E.channel,N=h?.name||"this channel";l("INJECT",`Wrapping with button for: ${N} (${M})`);const j=e.React.createElement(m,{key:"stalker-action",style:{flexDirection:"row",alignItems:"center",paddingVertical:14,paddingHorizontal:20,backgroundColor:"#2b2d31",marginHorizontal:12,marginTop:8,marginBottom:12,borderRadius:12,borderWidth:1,borderColor:"#5865F2"},onPress:function(){var T;l("ACTION","Stalker button pressed"),(T=x?.hideActionSheet)==null||T.call(x),setTimeout(function(){vt()},100)}},[e.React.createElement(c,{key:"icon",style:{fontSize:18,marginRight:12}},"\u{1F50D}"),e.React.createElement(p,{key:"txt",style:{flex:1}},[e.React.createElement(c,{key:"t1",style:{color:"#fff",fontSize:15,fontWeight:"bold"}},"Stalker Pro"),e.React.createElement(c,{key:"t2",style:{color:"#b5bac1",fontSize:11}},"Open Dashboard")]),e.React.createElement(c,{key:"arrow",style:{color:"#5865F2",fontSize:14}},"\u2192")]);return e.React.createElement(p,{key:"stalker-wrapper",style:{flex:1}},[n,j])}catch(y){return l("ERROR",`ChannelLongPress inject failed: ${y}`),n}})),l("PATCH","\u2705 ChannelLongPress patched (v5.4 - wrapper)")}catch(t){l("ERROR",`ChannelLongPress patch failed: ${t}`)}if(fe)try{F.push(Z.after("default",fe,function(t,n){var o;try{const s=t[0],i=((o=s?.user)==null?void 0:o.id)||s?.userId;i&&l("PROFILE",`ProfileBanner rendered: ${i}`)}catch(s){l("ERROR",`ProfileBanner read failed: ${s}`)}return n})),l("PATCH","\u2705 ProfileBanner patched (monitoring)")}catch(t){l("ERROR",`ProfileBanner patch failed: ${t}`)}if(H)try{F.push(Z.after("default",H,function(t,n){var o;try{const s=t[0],i=((o=s?.user)==null?void 0:o.id)||s?.userId;if(i&&(l("PROFILE",`UserProfileSection rendered: ${i}`),n&&n.props&&n.props.children)){const a=e.React.createElement(m,{key:"stalker-section",style:{backgroundColor:"#2b2d31",margin:12,padding:12,borderRadius:8,flexDirection:"row",alignItems:"center"},onPress:function(){l("ACTION",`Stalker pressed for user: ${i}`),mt("user",i)}},[e.React.createElement(c,{key:"icon",style:{fontSize:16,marginRight:8}},"\u{1F50D}"),e.React.createElement(c,{key:"text",style:{color:"#fff",fontSize:14}},"Stalker Pro")]),f=n.props.children;Array.isArray(f)&&(f.push(a),l("INJECT","\u2705 Added section to profile"))}}catch(s){l("ERROR",`UserProfileSection inject failed: ${s}`)}return n})),l("PATCH","\u2705 UserProfileSection patched (with injection)")}catch(t){l("ERROR",`UserProfileSection patch failed: ${t}`)}$!=null&&$.getString&&(ee=setInterval(St,2e3),l("LOAD","\u2705 Clipboard monitor started")),l("LOAD",`Total patches: ${F.length}`),b.showToast("\u{1F50D} Stalker Pro v5.1-dev",R.getAssetIDByName("Check"))},It=function(){l("UNLOAD","Cleaning up..."),ee&&(clearInterval(ee),ee=null);const t=F.length;for(const n of F)try{n()}catch{}F=[],te=!1,K=!1,l("UNLOAD",`Removed ${t} patches`)};return X.onLoad=Tt,X.onUnload=It,X.settings=Ct,X})({},vendetta,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.ui.toasts,vendetta.patcher);
