(function(V,Ve,g,e,Ke,S,v,K){"use strict";var Ye=Object.defineProperty,Je=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Re=(t,r,i)=>r in t?Ye(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,be=(t,r)=>{for(var i in r||(r={}))Qe.call(r,i)&&Re(t,i,r[i]);if(pe)for(var i of pe(r))Xe.call(r,i)&&Re(t,i,r[i]);return t},ke=(t,r)=>Je(t,qe(r)),Se,ve,Ee,Ce,me,Ie,we,Ae;const{ScrollView:Ze,View:y,Text:s,TouchableOpacity:C,TextInput:Pe}=Ke.General,Z=((Se=e.ReactNative)==null?void 0:Se.BackHandler)||g.findByProps("addEventListener","removeEventListener","exitApp"),T=g.findByStoreName("UserStore"),m=g.findByStoreName("GuildStore"),w=g.findByStoreName("GuildMemberStore"),p=g.findByStoreName("ChannelStore"),D=g.findByStoreName("SelectedGuildStore"),ee=g.findByStoreName("GuildChannelStore"),te=g.findByStoreName("GuildRoleStore"),L=g.findByProps("getChannelPermissions","can"),{getChannel:Te}=g.findByProps("getChannel")||{},ne=((ve=g.findByProps("ChannelTypes"))==null?void 0:ve.ChannelTypes)||{},A=((Ee=e.ReactNative)==null?void 0:Ee.Clipboard)||g.findByProps("setString","getString"),re=g.findByProps("getAPIBaseURL","get")||g.findByProps("API_HOST","get");let U=[];const et=50;function d(t,r){const i=`[${new Date().toLocaleTimeString()}] [${t}] ${r}`;U.unshift(i),U.length>et&&U.pop(),Ve.logger.log(i)}function ae(){return U}function tt(){U=[]}d("INIT","Starting module discovery...");const le=g.findByName("UserProfileHeader",!1);(Ce=g.findByProps("UserProfileActions"))==null||Ce.UserProfileActions;const O=g.findByName("UserProfileSection",!1),ie=g.findByName("ProfileBanner",!1),$=g.findByName("ChannelLongPressActionSheet",!1),nt=g.findByName("ChannelLongPress",!1);g.findByName("ChannelContextMenu",!1),g.findByProps("openContextMenu","closeContextMenu");const rt=g.findByProps("ChannelLongPressActionSheet");g.findByProps("openLazy","hideActionSheet");const z=g.findByProps("openLazy","hideActionSheet");g.findByName("ActionSheetRow",!1),g.findByName("ActionSheetTitleHeader",!1),g.findByName("ActionSheetCloseButton",!1),(me=g.findByProps("NavigationContainer"))==null||me.default,g.findByProps("createStackNavigator"),(Ie=g.findByProps("useNavigation"))==null||Ie.useNavigation;const oe=g.findByProps("registerCommand","unregisterCommand");if(d("INIT",`UserProfileHeader: ${!!le}`),d("INIT",`UserProfileSection: ${!!O}`),d("INIT",`ProfileBanner: ${!!ie}`),d("INIT",`ChannelLongPress: ${!!$}`),d("INIT",`ChannelLongPress2: ${!!nt}`),d("INIT",`ChannelActionSheet: ${!!rt}`),d("INIT",`ActionSheet: ${!!z}`),d("INIT",`Commands: ${!!oe}`),$)try{const t=Object.keys($);d("KEYS",`ChannelLongPress keys: ${t.join(", ")||"none"}`),typeof $=="function"&&d("KEYS","ChannelLongPress is a function")}catch(t){d("ERROR",`Keys read failed: ${t}`)}if(O)try{const t=Object.keys(O);d("KEYS",`UserProfileSection keys: ${t.join(", ")||"none"}`),typeof O=="function"&&d("KEYS","UserProfileSection is a function")}catch(t){d("ERROR",`Keys read failed: ${t}`)}if(z)try{const t=Object.keys(z);d("KEYS",`ActionSheet keys: ${t.join(", ")||"none"}`)}catch(t){d("ERROR",`Keys read failed: ${t}`)}const De=((Ae=(we=e.constants)==null?void 0:we.Permissions)==null?void 0:Ae.VIEW_CHANNEL)||1024,at={1:"Create Invite",2:"Kick Members",4:"Ban Members",8:"Administrator",16:"Manage Channels",32:"Manage Server",64:"Add Reactions",128:"View Audit Log",256:"Priority Speaker",512:"Stream",1024:"View Channel",2048:"Send Messages",4096:"Send TTS",8192:"Manage Messages",16384:"Embed Links",32768:"Attach Files",65536:"Read History",131072:"Mention Everyone",262144:"Use External Emoji",524288:"View Insights",1048576:"Connect",2097152:"Speak",4194304:"Mute Members",8388608:"Deafen Members",16777216:"Move Members",33554432:"Use VAD",67108864:"Change Nickname",134217728:"Manage Nicknames",268435456:"Manage Roles",536870912:"Manage Webhooks",1073741824:"Manage Emojis"};let se=!0,j=!1,ce="",Y=null,B=[],J=!1,F={type:null,id:null};const Be=[ne.DM,ne.GROUP_DM,ne.GUILD_CATEGORY];function de(t,r){if(!(!e.FluxDispatcher||r.length===0))try{e.FluxDispatcher.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[t],userIds:r})}catch{}}function lt(t){var r,i;if(!t||(typeof t=="string"&&(t=Te?.(t)||((r=p?.getChannel)==null?void 0:r.call(p,t))),!t||Be.includes(t.type)))return!1;t.realCheck=!0;const o=!((i=L?.can)!=null&&i.call(L,De,t));return delete t.realCheck,o}function Fe(t){const r=Number(t),i=[];for(const[o,l]of Object.entries(at))r&Number(o)&&i.push(l);return i}function it(t,r){var i,o,l;try{const a=(i=m?.getGuild)==null?void 0:i.call(m,r);if((o=a?.roles)!=null&&o[t])return{name:a.roles[t].name,color:a.roles[t].color||0,found:!0}}catch{}try{if(te){const a=(l=te.getRole)==null?void 0:l.call(te,r,t);if(a)return{name:a.name,color:a.color||0,found:!0}}}catch{}return{name:`Role ID: ${t}`,color:5793266,found:!1}}function ot(t,r){var i,o;const l=(i=T?.getUser)==null?void 0:i.call(T,t),a=(o=w?.getMember)==null?void 0:o.call(w,r,t);return l?{name:a?.nick||l.globalName||l.username,isFetched:!0}:{name:`User ID: ${t}`,isFetched:!1}}function q(t,r){const i=[],o=[];try{const l=t.permissionOverwrites||{};for(const[a,u]of Object.entries(l)){if(!u)continue;const R=Number(u.allow||0),b=Number(u.deny||0),k=u.type===0||u.type==="role",W=k?"role":"user";let h="",P=0,G=!1,x=!0;if(k)if(a===r)h="@everyone",P=10070709;else{const N=it(a,r);h=N.name,P=N.color,G=!N.found}else{o.push(a);const N=ot(a,r);h=N.name,x=N.isFetched,G=!x}i.push({id:a,name:h,type:W,color:P,allowed:Fe(R),denied:Fe(b),isUnknown:G,isFetched:x})}i.sort(function(a,u){return a.name==="@everyone"?-1:u.name==="@everyone"?1:a.type!==u.type?a.type==="role"?-1:1:a.name.localeCompare(u.name)})}catch{}return{overwrites:i,userIds:o}}function Ne(t){switch(t){case 0:return"\u{1F4AC}";case 2:return"\u{1F50A}";case 4:return"\u{1F4C1}";case 5:return"\u{1F4E2}";case 13:return"\u{1F3AD}";case 15:return"\u{1F4CB}";default:return"\u{1F4DD}"}}function st(t){var r,i;const o=new Map;try{const l=(r=p?.getMutableGuildChannelsForGuild)==null?void 0:r.call(p,t);if(l)for(const a of Array.isArray(l)?l:Object.values(l))a!=null&&a.id&&o.set(a.id,a)}catch{}try{const l=(i=p?.getMutableGuildChannels)==null?void 0:i.call(p);if(l)for(const a of Object.values(l))a?.guild_id===t&&a!=null&&a.id&&o.set(a.id,a)}catch{}try{if(ee!=null&&ee.getChannels){const l=ee.getChannels(t);if(l){const a=function(u){if(Array.isArray(u))for(const R of u){const b=R?.channel||R;b!=null&&b.id&&o.set(b.id,b)}};if(Array.isArray(l))a(l);else for(const u of Object.keys(l))Array.isArray(l[u])&&a(l[u])}}}catch{}return Array.from(o.values())}function $e(t){var r,i;const o=[];J=!0;try{const l=st(t);for(const a of l)!(a!=null&&a.id)||a.type===4||a.type===1||a.type===3||a.type===11||a.type===12||Be.includes(a.type)||lt(a)&&o.push({id:a.id,name:a.name||"unknown",type:a.type||0,parentName:a.parent_id&&((i=(r=p?.getChannel)==null?void 0:r.call(p,a.parent_id))==null?void 0:i.name)||"",permissions:q(a,t),guildId:t})}catch(l){d("ERROR",`getHiddenChannels: ${l}`)}finally{J=!1}return o.sort(function(l,a){return l.name.localeCompare(a.name)})}function ct(t,r,i){var o;const l=(o=w?.getMember)==null?void 0:o.call(w,i,t);if(!l)return!1;const a=l.roles||[];for(const u of r.permissions.overwrites)if(u.type==="user"&&u.id===t&&u.allowed.includes("View Channel")||u.type==="role"&&a.includes(u.id)&&u.allowed.includes("View Channel"))return!0;return!1}function dt(t,r){return $e(r).filter(function(i){return ct(t,i,r)})}function ze(t){if(!m||!w)return[];try{return Object.values(m.getGuilds()||{}).filter(function(r){return w.getMember(r.id,t)})}catch{return[]}}async function xe(t,r){var i,o,l;if(!(re!=null&&re.get))return[];try{const a=await re.get({url:`/guilds/${t}/messages/search`,query:{author_id:r,include_nsfw:!0,sort_by:"timestamp",sort_order:"desc"}}),u=((o=(i=m?.getGuild)==null?void 0:i.call(m,t))==null?void 0:o.name)||"Unknown Server";return(((l=a?.body)==null?void 0:l.messages)||[]).map(function(R){var b,k;return{id:R[0].id,content:R[0].content||"[No text]",channelId:R[0].channel_id,channelName:((k=(b=p?.getChannel)==null?void 0:b.call(p,R[0].channel_id))==null?void 0:k.name)||"unknown",guildId:t,guildName:u,timestamp:R[0].timestamp}})}catch{return[]}}function H(t){return A!=null&&A.setString?(A.setString(t),ce=t,!0):!1}function ut(t,r){H(t)&&v.showToast(`\u{1F4CB} ${r==="role"?"Role":"User"} ID copied!`,S.getAssetIDByName("Check"))}async function ft(t){var r;const i=(r=T?.getCurrentUser)==null?void 0:r.call(T);if(i&&t===i.id)return;const o=ze(t);if(o.length===0){v.showToast("\u274C No mutual servers",S.getAssetIDByName("Small"));return}v.showToast("\u{1F50D} Searching...",S.getAssetIDByName("ic_search"));let l=[];for(let R=0;R<Math.min(o.length,8);R++){try{l.push(...await xe(o[R].id,t))}catch{}R<o.length-1&&await new Promise(function(b){return setTimeout(b,250)})}if(l.sort(function(R,b){return new Date(b.timestamp).getTime()-new Date(R.timestamp).getTime()}),l.length===0){v.showToast("\u{1F4ED} No messages",S.getAssetIDByName("Small"));return}const a=l[0],u=`https://discord.com/channels/${a.guildId}/${a.channelId}/${a.id}`;v.showToast(`\u2705 Found ${l.length}!`,S.getAssetIDByName("Check")),setTimeout(function(){H(u)&&v.showToast("\u{1F4CB} Copied latest!",S.getAssetIDByName("Check"))},1500)}async function gt(){if(!(j||!se))try{if(!(A!=null&&A.getString))return;const t=await A.getString();t&&t!==ce&&/^\d{17,19}$/.test(t.trim())&&(ce=t,v.showToast("\u{1F3AF} ID detected!",S.getAssetIDByName("Check")),setTimeout(function(){return ft(t.trim())},1e3))}catch{}}function yt(t){const r=Date.now()-new Date(t).getTime(),i=Math.floor(r/6e4),o=Math.floor(i/60),l=Math.floor(o/24);return l>0?`${l}d ago`:o>0?`${o}h ago`:`${i}m ago`}function ht(){var t,r,i;const[o,l]=e.React.useState("hidden"),[a,u]=e.React.useState([]),[R,b]=e.React.useState(!1),[k,W]=e.React.useState(null),[h,P]=e.React.useState(null),[G,x]=e.React.useState("Tap 'Scan' to find hidden channels"),[N,ue]=e.React.useState(""),[fe,kt]=e.React.useState([]),[M,St]=e.React.useState(null),[vt,Oe]=e.React.useState(!1),[Me,Ue]=e.React.useState(""),[Et,ge]=e.React.useState(!1),[ye,je]=e.React.useState([]),[Q,Ct]=e.React.useState(se),[X,he]=e.React.useState(ae());e.React.useState(0),e.React.useEffect(function(){var n,c;if(F.type==="user"&&F.id)ue(F.id),l("user"),F={type:null,id:null};else if(F.type==="channel"&&F.id){const f=(n=D?.getGuildId)==null?void 0:n.call(D);if(f){const E=(c=p?.getChannel)==null?void 0:c.call(p,F.id);if(E){const I={id:E.id,name:E.name,type:E.type,parentName:"",permissions:q(E,f),guildId:f};P(I),l("perms")}}F={type:null,id:null}}},[]),e.React.useEffect(function(){var n,c,f;j=!0;const E=(n=D?.getGuildId)==null?void 0:n.call(D);E&&W((c=m?.getGuild)==null?void 0:c.call(m,E));const I=(f=Z?.addEventListener)==null?void 0:f.call(Z,"hardwareBackPress",function(){return h?(P(null),o==="perms"&&l("hidden"),!0):o!=="hidden"?(l("hidden"),!0):!1});return function(){var _e;j=!1,(_e=I?.remove)==null||_e.call(I)}},[h,o]),e.React.useEffect(function(){if(h&&h.permissions.userIds.length>0){de(h.guildId,h.permissions.userIds);const n=setTimeout(function(){var c;if(h&&k){const f=(c=p?.getChannel)==null?void 0:c.call(p,h.id);f&&P(ke(be({},h),{permissions:q(f,k.id)}))}},1500);return function(){return clearTimeout(n)}}},[h?.id]);const mt=function(){var n,c;b(!0),u([]);try{const f=(n=D?.getGuildId)==null?void 0:n.call(D);if(f){W((c=m?.getGuild)==null?void 0:c.call(m,f));const E=$e(f);u(E),x(`Scanned \u2192 ${E.length} hidden`),v.showToast(E.length>0?`\u{1F512} ${E.length} hidden!`:"\u2728 No hidden",S.getAssetIDByName("Check"))}else W(null),x("Open a server first")}catch(f){x(`Error: ${f}`)}finally{b(!1)}},It=function(){h&&k&&(de(k.id,h.permissions.userIds),setTimeout(function(){var n;const c=(n=p?.getChannel)==null?void 0:n.call(p,h.id);c&&(P(ke(be({},h),{permissions:q(c,k.id)})),v.showToast("\u{1F504} Refreshed!",S.getAssetIDByName("Check")))},500))},wt=function(){const n=N.trim();if(!n||n.length<17){v.showToast("Enter valid ID",S.getAssetIDByName("Small"));return}if(!k){v.showToast("Open a server first",S.getAssetIDByName("Small"));return}Oe(!0),de(k.id,[n]),setTimeout(function(){var c,f;const E=(c=T?.getUser)==null?void 0:c.call(T,n),I=(f=w?.getMember)==null?void 0:f.call(w,k.id,n);St({user:E,member:I,id:n}),kt(dt(n,k.id)),Oe(!1)},500)},At=async function(){const n=Me.trim();if(!n||n.length<17){v.showToast("Enter valid ID",S.getAssetIDByName("Small"));return}ge(!0),je([]);const c=ze(n);if(c.length===0){v.showToast("\u274C No mutual servers",S.getAssetIDByName("Small")),ge(!1);return}v.showToast("\u{1F50D} Searching...",S.getAssetIDByName("ic_search"));let f=[];for(let E=0;E<Math.min(c.length,8);E++){try{f.push(...await xe(c[E].id,n))}catch{}E<c.length-1&&await new Promise(function(I){return setTimeout(I,250)})}f.sort(function(E,I){return new Date(I.timestamp).getTime()-new Date(E.timestamp).getTime()}),je(f),ge(!1),v.showToast(f.length>0?`\u2705 ${f.length} messages!`:"\u{1F4ED} No messages",S.getAssetIDByName("Check"))},Pt=function(n){const c=`https://discord.com/channels/${n.guildId}/${n.channelId}/${n.id}`;H(c)&&v.showToast("\u{1F4CB} Link copied!",S.getAssetIDByName("Check"))},He=async function(n){var c;try{const f=await((c=A?.getString)==null?void 0:c.call(A));f&&(n(f.trim()),v.showToast("\u{1F4CB} Pasted!",S.getAssetIDByName("Check")))}catch{}},Tt=function(n){se=n,Ct(n),v.showToast(n?"\u2705 Auto-search enabled":"\u274C Auto-search disabled",S.getAssetIDByName("Check"))},We=function(n){return n?`#${n.toString(16).padStart(6,"0")}`:"#99AAB5"},_=function({id:n,label:c,icon:f}){return e.React.createElement(C,{style:{flex:1,padding:6,backgroundColor:o===n?"#5865F2":"#2b2d31",borderRadius:6,marginHorizontal:1},onPress:function(){l(n),n!=="perms"&&P(null),n==="debug"&&he(ae())}},e.React.createElement(s,{style:{color:"#fff",textAlign:"center",fontSize:9,fontWeight:o===n?"bold":"normal"}},`${f}${c}`))},Ge=function({ch:n,onPress:c}){return e.React.createElement(C,{style:{margin:6,padding:10,backgroundColor:"#2b2d31",borderRadius:10,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:c},[e.React.createElement(y,{key:"h",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(s,{key:"i",style:{fontSize:14,marginRight:6}},Ne(n.type)),e.React.createElement(y,{key:"n",style:{flex:1}},[e.React.createElement(s,{key:"nm",style:{color:"#fff",fontSize:13,fontWeight:"bold"}},n.name),n.parentName&&e.React.createElement(s,{key:"p",style:{color:"#949ba4",fontSize:10}},`in ${n.parentName}`)]),e.React.createElement(s,{key:"a",style:{color:"#5865F2",fontSize:10}},"\u2192")])])},Dt=function({ow:n}){return e.React.createElement(C,{style:{margin:4,marginHorizontal:6,padding:8,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:n.type==="role"?We(n.color):"#43b581"},onPress:function(){return ut(n.id,n.type)}},[e.React.createElement(y,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:3}},[e.React.createElement(s,{key:"t",style:{fontSize:11,marginRight:4}},n.type==="role"?"\u{1F3F7}\uFE0F":"\u{1F464}"),e.React.createElement(y,{key:"nw",style:{flex:1}},[e.React.createElement(s,{key:"n",style:{color:n.type==="role"?We(n.color):"#43b581",fontSize:12,fontWeight:"bold"}},n.name),!n.isFetched&&n.type==="user"&&e.React.createElement(s,{key:"hint",style:{color:"#949ba4",fontSize:9}},"Tap refresh")]),e.React.createElement(y,{key:"b",style:{backgroundColor:n.type==="role"?"#5865F2":"#43b581",paddingHorizontal:5,paddingVertical:2,borderRadius:3}},e.React.createElement(s,{style:{color:"#fff",fontSize:8,fontWeight:"bold"}},n.type==="role"?"ROLE":"USER")),e.React.createElement(s,{key:"copy",style:{color:"#949ba4",fontSize:9,marginLeft:4}},"\u{1F4CB}")]),n.allowed.length>0&&e.React.createElement(y,{key:"a",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},n.allowed.map(function(c,f){return e.React.createElement(s,{key:`a${f}`,style:{color:"#43b581",fontSize:9,backgroundColor:"rgba(67,181,129,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u2705${c}`)})),n.denied.length>0&&e.React.createElement(y,{key:"d",style:{flexDirection:"row",flexWrap:"wrap",marginTop:2}},n.denied.map(function(c,f){return e.React.createElement(s,{key:`d${f}`,style:{color:"#ed4245",fontSize:9,backgroundColor:"rgba(237,66,69,0.15)",paddingHorizontal:4,paddingVertical:1,borderRadius:3,marginRight:2,marginBottom:2}},`\u274C${c}`)}))])};return e.React.createElement(Ze,{style:{flex:1,backgroundColor:"#1e1f22"}},[e.React.createElement(y,{key:"h",style:{padding:10,backgroundColor:"#2b2d31",marginBottom:6}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:16,fontWeight:"bold",textAlign:"center"}},"\u{1F50D} Stalker Pro v5.2-dev"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:10,textAlign:"center"}},k?`\u{1F4CD} ${k.name}`:"Open a server")]),e.React.createElement(y,{key:"tabs",style:{flexDirection:"row",padding:4,marginBottom:4}},[e.React.createElement(_,{key:"1",id:"hidden",label:"Hidden",icon:"\u{1F512}"}),e.React.createElement(_,{key:"2",id:"perms",label:"Perms",icon:"\u{1F510}"}),e.React.createElement(_,{key:"3",id:"user",label:"User",icon:"\u{1F464}"}),e.React.createElement(_,{key:"4",id:"search",label:"Msgs",icon:"\u{1F4AC}"}),e.React.createElement(_,{key:"5",id:"debug",label:"Debug",icon:"\u{1F41B}"})]),o==="hidden"&&[e.React.createElement(C,{key:"scan",style:{margin:8,padding:12,backgroundColor:"#5865F2",borderRadius:8,alignItems:"center"},onPress:mt},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:14}},R?"\u23F3 Scanning...":"\u{1F504} Scan Server")),e.React.createElement(s,{key:"dbg",style:{color:"#949ba4",textAlign:"center",fontSize:10,marginBottom:6}},G),...a.map(function(n,c){return e.React.createElement(Ge,{key:`c${c}`,ch:n,onPress:function(){P(n),l("perms")}})}),a.length===0&&!R&&e.React.createElement(y,{key:"empty",style:{padding:30,alignItems:"center"}},[e.React.createElement(s,{key:"e1",style:{fontSize:30}},"\u{1F512}"),e.React.createElement(s,{key:"e2",style:{color:"#b5bac1",fontSize:12,marginTop:6,textAlign:"center"}},"Tap 'Scan Server' to find hidden channels")])],o==="perms"&&[!h&&e.React.createElement(y,{key:"no-sel",style:{padding:30,alignItems:"center"}},[e.React.createElement(s,{key:"t1",style:{fontSize:30}},"\u{1F510}"),e.React.createElement(s,{key:"t2",style:{color:"#fff",fontSize:13,marginTop:6}},"Select a channel")]),h&&[e.React.createElement(y,{key:"ch-hdr",style:{padding:10,backgroundColor:"#2b2d31",margin:6,borderRadius:8}},[e.React.createElement(y,{key:"r",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(s,{key:"i",style:{fontSize:18,marginRight:8}},Ne(h.type)),e.React.createElement(s,{key:"n",style:{color:"#fff",fontSize:14,fontWeight:"bold",flex:1}},h.name)])]),e.React.createElement(y,{key:"btns",style:{flexDirection:"row",margin:6,marginTop:0}},[e.React.createElement(C,{key:"ref",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginRight:2,alignItems:"center"},onPress:It},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(C,{key:"cpy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:2,alignItems:"center"},onPress:function(){H(h.id)&&v.showToast("\u{1F4CB} Channel ID copied",S.getAssetIDByName("Check"))}},e.React.createElement(s,{style:{color:"#b5bac1",fontSize:9}},"\u{1F4CB} Channel ID"))]),e.React.createElement(s,{key:"hint",style:{color:"#949ba4",fontSize:9,textAlign:"center",marginBottom:4}},"Tap any role/user to copy ID"),...h.permissions.overwrites.map(function(n,c){return e.React.createElement(Dt,{key:`ow-${c}`,ow:n})})]],o==="user"&&[e.React.createElement(y,{key:"input-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F464} User ID Lookup"),e.React.createElement(y,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(Pe,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:N,onChangeText:ue}),e.React.createElement(C,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return He(ue)}},e.React.createElement(s,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(C,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:wt},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},vt?"\u23F3...":"\u{1F50D} Find Hidden Channels"))]),M&&e.React.createElement(y,{key:"user-info",style:{margin:8,marginTop:0,padding:8,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"name",style:{color:"#fff",fontSize:12,fontWeight:"bold"}},((t=M.member)==null?void 0:t.nick)||((r=M.user)==null?void 0:r.globalName)||((i=M.user)==null?void 0:i.username)||`User ${M.id.slice(-6)}`),e.React.createElement(s,{key:"access",style:{color:"#43b581",fontSize:10,marginTop:2}},`\u2705 Can access ${fe.length} hidden channels`)]),...fe.map(function(n,c){return e.React.createElement(Ge,{key:`uc${c}`,ch:n,onPress:function(){P(n),l("perms")}})}),M&&fe.length===0&&e.React.createElement(s,{key:"no",style:{color:"#949ba4",textAlign:"center",fontSize:11,marginTop:10}},"No hidden channel access")],o==="search"&&[e.React.createElement(y,{key:"auto-box",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(y,{key:"row",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},[e.React.createElement(y,{key:"txt"},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:11,fontWeight:"bold"}},"\u{1F4AC} Auto-Search"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:9}},"Copy User ID \u2192 auto-copies latest message")]),e.React.createElement(C,{key:"toggle",style:{padding:8,backgroundColor:Q?"#43b581":"#ed4245",borderRadius:6},onPress:function(){return Tt(!Q)}},e.React.createElement(s,{style:{color:"#fff",fontSize:10,fontWeight:"bold"}},Q?"ON":"OFF"))]),e.React.createElement(s,{key:"note",style:{color:"#949ba4",fontSize:9,marginTop:6}},j?"\u23F8\uFE0F Paused while dashboard is open":Q?"\u2705 Active":"\u274C Disabled")]),e.React.createElement(y,{key:"search-box",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"lbl",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginBottom:4}},"\u{1F50D} Manual Search"),e.React.createElement(y,{key:"row",style:{flexDirection:"row",alignItems:"center"}},[e.React.createElement(Pe,{key:"input",style:{flex:1,backgroundColor:"#1e1f22",color:"#fff",padding:8,borderRadius:6,fontSize:12},placeholder:"Enter User ID",placeholderTextColor:"#72767d",value:Me,onChangeText:Ue}),e.React.createElement(C,{key:"paste",style:{marginLeft:4,padding:8,backgroundColor:"#3f4147",borderRadius:6},onPress:function(){return He(Ue)}},e.React.createElement(s,{style:{color:"#fff",fontSize:11}},"\u{1F4CB}"))]),e.React.createElement(C,{key:"btn",style:{marginTop:8,padding:10,backgroundColor:"#5865F2",borderRadius:6,alignItems:"center"},onPress:At},e.React.createElement(s,{style:{color:"#fff",fontWeight:"bold",fontSize:12}},Et?"\u23F3 Searching...":"\u{1F50D} Find Messages"))]),ye.length>0&&e.React.createElement(s,{key:"results-title",style:{color:"#fff",fontSize:11,fontWeight:"bold",marginLeft:8,marginTop:4}},`\u{1F4DD} ${ye.length} Messages:`),...ye.slice(0,25).map(function(n,c){return e.React.createElement(C,{key:`msg${c}`,style:{margin:4,marginHorizontal:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8,borderLeftWidth:3,borderLeftColor:"#5865F2"},onPress:function(){return Pt(n)}},[e.React.createElement(y,{key:"hdr",style:{flexDirection:"row",alignItems:"center",marginBottom:4}},[e.React.createElement(s,{key:"ch",style:{color:"#5865F2",fontSize:11,flex:1}},`#${n.channelName}`),e.React.createElement(s,{key:"time",style:{color:"#949ba4",fontSize:9}},yt(n.timestamp))]),e.React.createElement(s,{key:"content",style:{color:"#dcddde",fontSize:11},numberOfLines:2},n.content),e.React.createElement(s,{key:"server",style:{color:"#72767d",fontSize:9,marginTop:4}},`\u{1F4CD} ${n.guildName}`)])})],o==="debug"&&[e.React.createElement(y,{key:"debug-header",style:{margin:8,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:14,fontWeight:"bold"}},"\u{1F41B} Debug Logs"),e.React.createElement(s,{key:"s",style:{color:"#b5bac1",fontSize:10,marginTop:4}},`${X.length} log entries`),e.React.createElement(y,{key:"btns",style:{flexDirection:"row",marginTop:8}},[e.React.createElement(C,{key:"refresh",style:{flex:1,padding:8,backgroundColor:"#5865F2",borderRadius:6,marginRight:4,alignItems:"center"},onPress:function(){return he(ae())}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F504} Refresh")),e.React.createElement(C,{key:"clear",style:{flex:1,padding:8,backgroundColor:"#ed4245",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){tt(),he([])}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F5D1}\uFE0F Clear")),e.React.createElement(C,{key:"copy",style:{flex:1,padding:8,backgroundColor:"#3f4147",borderRadius:6,marginLeft:4,alignItems:"center"},onPress:function(){H(X.join(`
`))&&v.showToast("\u{1F4CB} Logs copied!",S.getAssetIDByName("Check"))}},e.React.createElement(s,{style:{color:"#fff",fontSize:10}},"\u{1F4CB} Copy"))])]),e.React.createElement(y,{key:"module-status",style:{margin:8,marginTop:0,padding:10,backgroundColor:"#2b2d31",borderRadius:8}},[e.React.createElement(s,{key:"t",style:{color:"#fff",fontSize:12,fontWeight:"bold",marginBottom:6}},"\u{1F4E6} Module Status"),e.React.createElement(s,{key:"m1",style:{color:le?"#43b581":"#ed4245",fontSize:10}},`UserProfileHeader: ${le?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m2",style:{color:$?"#43b581":"#ed4245",fontSize:10}},`ChannelLongPress: ${$?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m3",style:{color:z?"#43b581":"#ed4245",fontSize:10}},`ActionSheet: ${z?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m4",style:{color:oe?"#43b581":"#ed4245",fontSize:10}},`Commands: ${oe?"\u2705":"\u274C"}`),e.React.createElement(s,{key:"m5",style:{color:"#949ba4",fontSize:10,marginTop:4}},`Patches active: ${B.length}`)]),...X.map(function(n,c){return e.React.createElement(s,{key:`log${c}`,style:{color:n.includes("ERROR")?"#ed4245":n.includes("SUCCESS")?"#43b581":"#b5bac1",fontSize:9,paddingHorizontal:8,paddingVertical:2,fontFamily:"monospace"}},n)}),X.length===0&&e.React.createElement(s,{key:"no-logs",style:{color:"#949ba4",textAlign:"center",marginTop:20,fontSize:11}},"No logs yet")]])}const pt=ht;function Le(t,r){F={type:t,id:r},d("ACTION",`Set context: ${t} = ${r}`),v.showToast("\u{1F50D} Open plugin settings to view!",S.getAssetIDByName("Check"))}const Rt=function(){if(d("LOAD","=== STALKER PRO v5.2-dev ==="),L!=null&&L.can)try{B.push(K.after("can",L,function([t,r],i){return r!=null&&r.realCheck?i:J&&t===De?!0:i})),d("PATCH","\u2705 Permissions.can patched")}catch(t){d("ERROR",`Permissions.can patch failed: ${t}`)}if($)try{B.push(K.after("default",$,function(t,r){var i,o;try{const l=t[0],a=(i=l?.channel)==null?void 0:i.id,u=((o=l?.channel)==null?void 0:o.name)||"channel";if(d("CHANNEL",`LongPress rendered: ${u} (${a})`),r&&r.props&&r.props.children){const R=e.React.createElement(C,{key:"stalker-perms",style:{flexDirection:"row",alignItems:"center",paddingVertical:12,paddingHorizontal:16},onPress:function(){var k;d("ACTION",`Stalker pressed for channel: ${a}`),Le("channel",a),(k=z?.hideActionSheet)==null||k.call(z)}},[e.React.createElement(s,{key:"icon",style:{fontSize:20,marginRight:16}},"\u{1F510}"),e.React.createElement(s,{key:"text",style:{color:"#fff",fontSize:16}},"View Permissions (Stalker)")]),b=r.props.children;if(Array.isArray(b))b.push(R),d("INJECT","\u2705 Added row to children array");else if(b&&b.props&&b.props.children){const k=b.props.children;Array.isArray(k)&&(k.push(R),d("INJECT","\u2705 Added row to nested children"))}}}catch(l){d("ERROR",`ChannelLongPress inject failed: ${l}`)}return r})),d("PATCH","\u2705 ChannelLongPress patched (with injection)")}catch(t){d("ERROR",`ChannelLongPress patch failed: ${t}`)}if(ie)try{B.push(K.after("default",ie,function(t,r){var i;try{const o=t[0],l=((i=o?.user)==null?void 0:i.id)||o?.userId;l&&d("PROFILE",`ProfileBanner rendered: ${l}`)}catch(o){d("ERROR",`ProfileBanner read failed: ${o}`)}return r})),d("PATCH","\u2705 ProfileBanner patched (monitoring)")}catch(t){d("ERROR",`ProfileBanner patch failed: ${t}`)}if(O)try{B.push(K.after("default",O,function(t,r){var i;try{const o=t[0],l=((i=o?.user)==null?void 0:i.id)||o?.userId;if(l&&(d("PROFILE",`UserProfileSection rendered: ${l}`),r&&r.props&&r.props.children)){const a=e.React.createElement(C,{key:"stalker-section",style:{backgroundColor:"#2b2d31",margin:12,padding:12,borderRadius:8,flexDirection:"row",alignItems:"center"},onPress:function(){d("ACTION",`Stalker pressed for user: ${l}`),Le("user",l)}},[e.React.createElement(s,{key:"icon",style:{fontSize:16,marginRight:8}},"\u{1F50D}"),e.React.createElement(s,{key:"text",style:{color:"#fff",fontSize:14}},"Stalker Pro")]),u=r.props.children;Array.isArray(u)&&(u.push(a),d("INJECT","\u2705 Added section to profile"))}}catch(o){d("ERROR",`UserProfileSection inject failed: ${o}`)}return r})),d("PATCH","\u2705 UserProfileSection patched (with injection)")}catch(t){d("ERROR",`UserProfileSection patch failed: ${t}`)}A!=null&&A.getString&&(Y=setInterval(gt,2e3),d("LOAD","\u2705 Clipboard monitor started")),d("LOAD",`Total patches: ${B.length}`),v.showToast("\u{1F50D} Stalker Pro v5.1-dev",S.getAssetIDByName("Check"))},bt=function(){d("UNLOAD","Cleaning up..."),Y&&(clearInterval(Y),Y=null);const t=B.length;for(const r of B)try{r()}catch{}B=[],J=!1,j=!1,d("UNLOAD",`Removed ${t} patches`)};return V.onLoad=Rt,V.onUnload=bt,V.settings=pt,V})({},vendetta,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.ui.toasts,vendetta.patcher);
